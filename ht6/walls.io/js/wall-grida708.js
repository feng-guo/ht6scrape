window.templates=window.templates||{},window.templates.checkin_video=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="video-wrapper checkin-video-wrapper">\n  <video loop="loop" class="checkin-video">\n    <source src="'+__e(videoUrl)+'" type="video/mp4" />\n  </video>\n\n  <div class="video-mute-button"></div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates.highlight_icon=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<svg class="checkin-highlight-icon" x="0px" y="0px" width="41px" height="41px" viewBox="0 0 41 41">\n  <path class="checkin-highlight-icon-badge" d="M0,0v41l20.333-7L41,41V0H0z M26.988,28L20.5,25.104L14.011,28l0.89-6.766l-4.899-4.978l7.038-1.286L20.5,9\n  l3.46,5.971l7.038,1.286L26.1,21.234L26.988,28z"/>\n  <path class="checkin-highlight-icon-star" d="M20.5,9l3.46,5.971l7.038,1.286l-4.899,4.977L26.989,28\n  L20.5,25.104L14.011,28l0.89-6.766l-4.899-4.977l7.038-1.286L20.5,9"/>\n</svg>\n';return __p};
window.templates=window.templates||{},window.templates.message=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="checkin-message-wrapper">\n  <div class="checkin-message">\n    '+(null==(__t=message)?"":__t)+"\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates.user=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="checkin-user clearfix">\n  ',userLink?(__p+="\n\n    ",image&&(__p+='\n      <a href="'+(null==(__t=userLink)?"":__t)+'" class="checkin-user-image" target="_blank" style="background-image: url('+(null==(__t=image)?"":__t)+')">\n      </a>\n    '),__p+='\n\n    <div class="checkin-user-name" title="'+__e(combinedName)+'">\n      <a href="'+(null==(__t=userLink)?"":__t)+'" target="_blank">\n        '+(null==(__t=nameParts)?"":__t)+"\n      </a>\n    </div>\n\n  "):(__p+="\n\n    ",image&&(__p+='\n      <div class="checkin-user-image" style="background-image: url('+(null==(__t=image)?"":__t)+')">\n      </div>\n    '),__p+='\n\n    <div class="checkin-user-name" title="'+__e(combinedName)+'">\n      '+(null==(__t=nameParts)?"":__t)+"\n    </div>\n\n  "),__p+="\n\n  ",postLink?__p+='\n    <a href="'+(null==(__t=postLink)?"":__t)+'" class="checkin-timestamp" data-timestamp="'+(null==(__t=externalCreatedTimestamp)?"":__t)+'" target="_blank"></a>\n  ':__p+='\n    <span class="checkin-timestamp" data-timestamp="'+(null==(__t=externalCreatedTimestamp)?"":__t)+'"></span>\n  ',__p+='\n\n  <div class="checkin-type checkin-type-'+(null==(__t=type)?"":__t)+'" title="'+(null==(__t=helpers.getChannelName(type))?"":__t)+'" data-action="show-detail" >\n  </div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates.user_name_parts=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)hasSeparateNames?__p+='\n  <span class="checkin-user-name-part checkin-user-name-full">'+__e(fullName)+'</span>\n  <span class="checkin-user-name-part checkin-user-name-short">'+__e(shortName)+"</span>\n":__p+="\n  "+__e(combinedName)+"\n",__p+="\n";return __p};
window.templates=window.templates||{},window.templates["detail/container"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="detail-container" data-action="hide-detail">\n  <div class="detail-inner">\n    '+(null==(__t=detailContent)?"":__t)+'\n  </div>\n\n  <div class="detail-loading-indicator-wrapper">\n    <svg class="loading-indicator detail-loading-indicator">\n      <use xlink:href="#app-logo-svg"></use>\n    </svg>\n  </div>\n</div>\n\n<div class="detail-menu" data-action="hide-detail">\n  '+(null==(__t=detailMenuSharing)?"":__t)+'\n\n  <div class="detail-close" data-action="hide-detail"></div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates["detail/content"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="detail-content detail-content-'+(null==(__t=hasImage?"withimage":"withoutimage")?"":__t)+'">\n  '+(null==(__t=postImageElement)?"":__t)+'\n\n  <div class="detail-text-wrapper detail-text-wrapper-'+(null==(__t=network)?"":__t)+'">\n    <div class="detail-network-background detail-network-background-'+(null==(__t=network)?"":__t)+'"></div>\n\n    <div class="detail-text-inner">\n      <div class="detail-text-content">\n        '+(null==(__t=detailUserElement)?"":__t)+'\n\n        <div class="detail-message">\n          <div class="detail-message-inner">'+(null==(__t=message)?"":__t)+'</div>\n        </div>\n      </div>\n\n      <div class="detail-text-extra">\n        '+(null==(__t=detailSharingElement)?"":__t)+"\n      </div>\n    </div>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/menu_sharing"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="detail-menu-sharing">\n  <button type="button" class="detail-menu-sharing-expander" data-action="show-detail-menu-sharing">'+__e(helpers.translation.__("SHARE_POST"))+'</button>\n\n  <div class="detail-menu-sharing-content">\n    <a href="https://www.facebook.com/sharer/sharer.php?u='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-menu-sharing-button" data-action="share" data-network="facebook">\n      <i class="fa fa-facebook"></i>\n    </a>\n\n    <a href="https://twitter.com/intent/tweet?url='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-menu-sharing-button" data-action="share" data-network="twitter">\n      <i class="fa fa-twitter"></i>\n    </a>\n\n    <a href="#" class="detail-menu-sharing-button link-button" data-clipboard-text="'+(null==(__t=link)?"":__t)+'" title="'+__e(helpers.translation.__("SHARE_POST_LINK"))+'" data-action="detail-copy-link">\n      <i class="fa fa-link"></i>\n    </a>\n\n    <div class="detail-link-copied">\n      <span>'+__e(helpers.translation.__("COPIED_TO_CLIPBOARD"))+"<span>\n    </div>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/post_image"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)postImage&&(__p+='\n  <div\n    class="detail-image '+(null==(__t=postVideoElement?"detail-image-with-video":"")?"":__t)+'"\n    data-image="'+__e(postImage)+'"\n    data-aspect-ratio="'+(null==(__t=imageAspectRatio)?"":__t)+'"\n  >\n    ',postVideoElement?__p+="\n      "+(null==(__t=postVideoElement)?"":__t)+"\n    ":__p+='\n      <div class="detail-image-inner" style="background-image: url('+__e(postImage)+')">\n      </div>\n    ',__p+="\n\n    ",postLink&&(__p+='\n      <a href="'+__e(postLink)+'" target="_blank" class="detail-image-link"></a>\n    '),__p+="\n  </div>\n"),__p+="\n";return __p};
window.templates=window.templates||{},window.templates["detail/sharing"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<span class="detail-sharing-intro">\n  '+__e(helpers.translation.__("SHARE_POST"))+'\n</span>\n\n<div class="detail-sharing-buttons">\n  <a href="https://www.facebook.com/sharer/sharer.php?u='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-sharing-button" data-action="share" data-network="facebook">\n    <i class="fa fa-facebook"></i>\n  </a>\n\n  <a href="https://twitter.com/intent/tweet?url='+(null==(__t=encodeURIComponent(link))?"":__t)+"&text="+(null==(__t=encodeURIComponent(text))?"":__t)+"&via="+(null==(__t=twitterVia)?"":__t)+'" class="detail-sharing-button" data-action="share" data-network="twitter">\n    <i class="fa fa-twitter"></i>\n  </a>\n\n  <a href="https://plus.google.com/share?url='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-sharing-button" data-action="share" data-network="googleplus">\n    <i class="fa fa-google-plus"></i>\n  </a>\n\n  <a href="#" class="detail-sharing-button link-button" data-clipboard-text="'+(null==(__t=link)?"":__t)+'" title="'+__e(helpers.translation.__("SHARE_POST_LINK"))+'" data-action="detail-copy-link">\n    <i class="fa fa-link"></i>\n  </a>\n\n  <div class="detail-link-copied">\n    <span>'+__e(helpers.translation.__("COPIED_TO_CLIPBOARD"))+"<span>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/user"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="detail-user">\n  <a href="'+__e(userLink)+'" class="detail-user-image" target="_blank" style="background-image: url('+__e(userImage)+')">\n\n  </a>\n\n  <div class="detail-user-info">\n    <div class="detail-user-name" title="'+__e(combinedName)+'">\n      <i class="detail-network-icon detail-network-icon-'+__e(network)+'"></i>\n      <a href="'+__e(userLink)+'" target="_blank">'+__e(userName)+'</a>\n    </div>\n\n    <a href="'+__e(postLink)+'" class="detail-timestamp" target="_blank">'+__e(humanTimeDiff)+"</a>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/video"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)postVideo&&(__p+='\n  <div class="video-wrapper detail-video-wrapper">\n    <video loop="loop" class="detail-video" poster="'+__e(postImage)+'">\n      <source src="'+__e(postVideo)+'" type="video/mp4" />\n    </video>\n\n    <div class="video-play-button"></div>\n  </div>\n'),__p+="\n";return __p};
window.templates=window.templates||{},window.templates["embeds/vimeo_embed"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<iframe class="checkin-video-embed" src="https://player.vimeo.com/video/'+__e(token)+'?autoplay=1&loop=1&title=0&byline=0&portrait=0" frameborder="0" allowfullscreen></iframe>\n';return __p};
window.templates=window.templates||{},window.templates["embeds/youtube_embed"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)muteValue=mute?1:0,__p+='\n<iframe class="checkin-video-embed" src="https://www.youtube-nocookie.com/embed/'+__e(token)+"?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;mute="+(null==(__t=muteValue)?"":__t)+'" frameborder="0" allowfullscreen></iframe>\n';return __p};
window.templates=window.templates||{},window.templates.ad=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj)__p+='<div class="checkin-wrapper checkin-wrapper-'+(null==(__t=id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'">\n  <div class="checkin '+(null==(__t=type)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'" data-weight="'+(null==(__t=weight)?"":__t)+'" data-timestamp="'+(null==(__t=externalCreatedTimestamp)?"":__t)+'" data-bonus="'+(null==(__t=bonus)?"":__t)+'" data-type="'+(null==(__t=type)?"":__t)+'">\n    ',postLink?__p+='\n      <a class="checkin-image" href="'+(null==(__t=postLink)?"":__t)+'" target="_blank" style=\'background-image:url("'+(null==(__t=postImage)?"":__t)+"\");'></a>\n    ":__p+='\n      <div class="checkin-image" style=\'background-image:url("'+(null==(__t=postImage)?"":__t)+"\");'></div>\n    ",__p+="\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates.container=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="checkin-wrapper checkin-wrapper-'+(null==(__t=id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'">\n  <div class="checkin checkin-'+(null==(__t=id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'" data-weight="'+(null==(__t=weight)?"":__t)+'" data-timestamp="'+(null==(__t=externalCreatedTimestamp)?"":__t)+'" data-bonus="'+(null==(__t=bonus)?"":__t)+'" data-is-looped="'+(null==(__t=isLooped)?"":__t)+'" data-tags="'+__e(tags)+'" data-type="'+(null==(__t=type)?"":__t)+'" data-user-id="'+(null==(__t=userId)?"":__t)+'">\n  </div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates.image=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="checkin-image-wrapper checkin-image-preview-holder" data-action="show-detail">\n  ',postLink?(__p+='\n    <a\n      href="'+__e(postLink)+'"\n      target="_blank"\n      class="checkin-image"\n      style="background-image:url('+__e(image)+')"\n    >\n      ',showPlayButton&&(__p+='\n        <div class="video-play-button"></div>\n      '),__p+="\n    </a>\n  "):__p+='\n    <div class="checkin-image" style=\'background-image:url("'+(null==(__t=image)?"":__t)+"\");'></div>\n  ",__p+="\n\n  ",message&&(__p+='\n    <div class="checkin-message-wrapper">\n      <div class="checkin-message">\n        '+(null==(__t=message)?"":__t)+"\n      </div>\n    </div>\n  "),__p+="\n</div>\n";return __p};
"use strict";window.helpers=(function(){var e=function(e){return"[data-action~='"+e+"']"},t=function(e,t){var r="",n=e;do{var u=n%t;n=Math.floor(n/t),r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/".charAt(u)+r}while(0!==n);return r},r=function(e,t){var r=e.split("");return _.reduce(r,(function(e,r){return e*t+"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/".indexOf(r)}),0)},n=function(e){if(!e)return 0;var t=0,r=(e=e.toString()).length;if(0===r)return t;for(var n=0;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t)},u=function(e,t,r){if(r<=t)return e;var n=(e.length/r+1)/2,u=Math.round(t*n);return htmlTruncate(e,u,{ellipsis:"…"})},a=function(e){return e&&"object"===$.type(e)&&e.name?e.name:e&&"object"===$.type(e)&&e.title?e.title:e&&"object"===$.type(e)&&e.username?e.username:e&&"object"===$.type(e)&&e.id?e.id:$.isNumeric(e)||"string"===$.type(e)?""+e:"Facebook Page"},o=function(e){return"@"+e.username},i=function(e){return e.name||o(e)},c=function(e){return e.name},f=function(e){return e.name},s=function(e){return e.name},l=function(e){var t=e.external_name;return{username:t,name:e.external_fullname||t}},m=function(e){var t=l(e);return _.includes(["twitter","instagram"],e.type)?o(t):t.username},h=function(e){var t=l(e);switch(e.type){case"twitter":case"instagram":return i(t);case"facebook":return a(t);case"googleplus":return c(t);case"youtube":return f(t);case"pinterest":return s(t)}return t.name},d=function(e){switch(e){case"googleplus":return"Google+";case"foursquare":return"Foursquare / Swarm";case"youtube":return"YouTube";case"rss":return"RSS";case"ads":return"Advertising";case"vkontakte":return"VKontakte";default:return (function(e){return e.charAt(0).toUpperCase()+e.slice(1)})(e)}},g=function(e,t){return t||("facebook"===e?"page":"profile")};return{$actionElement:function(t){return $(e(t))},actionSelector:e,autoBind:function(e){var t=!0,r=!1,n=void 0;try{for(var u,a=Object.getOwnPropertyNames(e.constructor.prototype)[Symbol.iterator]();!(t=(u=a.next()).done);t=!0){var o=u.value,i=e[o];"constructor"!==o&&"function"==typeof i&&(e[o]=i.bind(e))}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return e},getChannelName:d,getSourceName:function(e,t){return d(e)+" "+g(e,t)},getUnixTimestamp:function(){return Math.floor(Date.now()/1e3)},checkins:{getShortName:m,getFullName:h,getCombinedName:function(e){var t=l(e),r=m(e),n=h(e);return n?r?t.name===t.username?r:r+" ("+n+")":n:r}},jQuery:{stringify:function(e){return $("<div>").append(e.clone()).html()}},string:{hash:n},integer:{ceilTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.ceil(e/t)*t},getRandomSeededInt:function(e,t,r){r+=1,e=n(e);var u=(e=1e4*Math.sin(e))-Math.floor(e);return Math.floor(u*(r-t))+t}},slug:{fromId:function(e){return t(e,62)},toId:function(e){return r(e,62)}},truncateTransformedTextPrecise:function(e,t,r){for(var n=t,a=0;;){var o=u(e,n,r);if($("<div>").html(o).text().length<=t)return o;if(n=Math.ceil(.9*n),++a>=50)return o}}}})();
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}})();!(function(){var e=(function(){function e(){_classCallCheck(this,e),this.isCancelled=!1,this.scheduledActions=new Immutable.List,helpers.autoBind(this)}return _createClass(e,[{key:"do",value:function(e){return this.scheduledActions=this.scheduledActions.push(e),this}},{key:"wait",value:function(n){return this.do((function(){return new Promise(function(t){var i=e.now();requestAnimationFrame((function r(){if(e.now()>i+n)return t();requestAnimationFrame(r)}))})})),this}},{key:"run",value:function(){var e=this,n=Promise.resolve();return this.scheduledActions.forEach((function(t){n=n.then((function(){if(!e.isCancelled)return t()}))})),this.scheduledActions=this.scheduledActions.clear(),n}},{key:"cancel",value:function(){this.scheduledActions=this.scheduledActions.clear(),this.isCancelled=!0}}],[{key:"now",value:function(){return window.performance&&window.performance.now?window.performance.now():Date.now()}},{key:"callAfter",value:function(n,t){return(new e).wait(t).do((function(){return n()})).run()}}]),e})();window.helpers.Animation=e})();
"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function n(n,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}})();!(function(){var n=function(n,t,a){var e=n,r=a,s=t,i=e/2-r,l=Math.atan(s/i),u=Math.asin(r*Math.sin(l)/e);return(Math.PI-l-u)*(180/Math.PI)},t=function(n,t,a){var e=t/n*2,r=Math.atan(e),s=Math.sin(r),i=t/s,l=a,u=l*l+i*i-2*l*i*Math.cos(r),c=i*s/Math.sqrt(u),o=Math.asin(c),h=Math.PI-o,f=l*Math.sin(h)/n,M=Math.asin(f),d=(Math.PI-h-M)*(180/Math.PI);return d<0?0:d},a=(function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"addRule",value:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,e=$("#dynamic-css");0===e.length&&(e=$("<style>").attr("id","dynamic-css").appendTo("body"));var r=e[0].sheet;a<0&&(a=_.get(r,"cssRules.length",0)),"addRule"in r?r.addRule(n,t,a):"insertRule"in r&&r.insertRule(n+"{"+t+"}",a)}},{key:"getTransformAngle",value:function(a,e,r){return r<a/2?n(a,e,r):t(a,e,r)}}]),a})();window.helpers.Css=a})();
"use strict";function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function n(n,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(a,e,i){return e&&n(a.prototype,e),i&&n(a,i),a}})();!(function(){var n=(function(){function n(a){_classCallCheck(this,n),this.wallOptions=a}return _createClass(n,null,[{key:"trackGaTiming",value:function(n,a,e){if(window.ga&&Date.now){WallTimings[n]=Date.now();var i=WallTimings[n]-WallTimings.pageload;i>6e4||ga("send",{hitType:"timing",timingCategory:a,timingVar:e,timingValue:i})}}}]),n})();window.helpers.Tracking=n})();
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}})();!(function(){var e=(function(){function e(n){_classCallCheck(this,e),this.wallOptions=n}return _createClass(e,null,[{key:"build",value:function(e,n){var t=_.get(templates,e);return t?t(n):""}}]),e})();window.helpers.Templates=e})();
"use strict";window.helpers.translation=(function(){var r=function(r){var t=WallMessages.items[r];if(t)return t;var a=WallMessages.plurals[r];if(a){var n=WallMessages.items[a];if(n)return n}return[r]},t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r(t),e=n[a];return e||n[0]},a=function(r,t){if(0===t.length)return r;for(var a=/\%(s|d)/,n=1;a.test(r);n++)r=r.replace(a,"%"+n+"$s");var e={},i=[];t.forEach((function(r,t){var a="\\%("+(t+1)+")\\$s";e["%"+(t+1)+"$s"]=r,i.push(a)}));var l=new RegExp(i.join("|"),"g");return r.replace(l,(function(r){return e[r]}))},n=function(r){for(var n=arguments.length,e=Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];var l=t(r);return a(l,e)};return{translateText:function(){var r=function(r,t){var a=t.split("=");if(!(a.length<2)){var e=a[0],i=a[1];e&&i&&r.attr(e,n(i))}};$("[data-translate]").each((function(){var r=$(this),t=r.data("translate");r.html(n(t))})),$("[data-translate-attribute]").each((function(){var t=$(this),a=t.data("translate-attribute").split("|"),n=!0,e=!1,i=void 0;try{for(var l,s=a[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;r(t,u)}}catch(r){e=!0,i=r}finally{try{!n&&s.return&&s.return()}finally{if(e)throw i}}}))},__:n,__n:function(r,n,e){for(var i=arguments.length,l=Array(i>3?i-3:0),s=3;s<i;s++)l[s-3]=arguments[s];var u=WallMessages.pluralFunction(e),o=t(u>0?n:r,u);return a(o,l)}}})();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})();!(function(){var e=$("body"),t=$(window),n=helpers.translation.__,i=helpers.translation.__n,o=helpers.Animation,a=(function(){function a(e){_classCallCheck(this,a),this.wallOptions=e,this.disconnectTimeout=null,this.reconnectTimeout=null,this.serverStartedAt=null,helpers.autoBind(this)}return _createClass(a,[{key:"prepareEntities",value:function(e){if(!e.entities)return e;var t=void 0;try{t=JSON.parse(e.entities)}catch(e){}return t||(t={}),e.entities=t,e}},{key:"getRandomCheckinColorClass",value:function(e){var t=this.wallOptions.colorCount;return"checkin-color-"+helpers.integer.getRandomSeededInt(e,1,t)}},{key:"initUser",value:function(){betterFetch.json(this.wallOptions.webAppPath+"/walls/user_status.json",{wall_id:this.wallOptions.wallId}).then((function(e){$("html").toggleClass("has-wall-access",e.canEditWall).toggleClass("has-moderation-access",e.canModerateWall).toggleClass("is-logged-in",e.isLoggedIn).toggleClass("is-not-logged-in",!e.isLoggedIn),e.overlayBar&&a.showNotificationBar(e.overlayBar)})).catch((function(e){})).then((function(){$("html").removeClass("user-status-unknown")}))}},{key:"generateInstructions",value:function(){var e=$(".post_instructions"),t=this.wallOptions.postInstructions,i=$("<ul>"),o=t.basic||[],a=t.networks||[],l=!0,s=!1,r=void 0;try{for(var c,u=o[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;if(d){var h=$("<li>").text(d);i.append(h)}}}catch(e){s=!0,r=e}finally{try{!l&&u.return&&u.return()}finally{if(s)throw r}}var f=!0,v=!1,p=void 0;try{for(var m,w=a[Symbol.iterator]();!(f=(m=w.next()).done);f=!0){var k=m.value,g=$("<li>").html(n(k.message,k.tags));i.append(g)}}catch(e){v=!0,p=e}finally{try{!f&&w.return&&w.return()}finally{if(v)throw p}}e.addClass("post-instructions-hidden"),e.html(i.contents())}},{key:"getWallSocket",value:function(){var e=this,t=$.param({wallId:this.wallOptions.wallId,client:"wallsio-frontend-2017_8_24",initialCheckins:this.wallOptions.initialCheckins,cookieSupport:a.hasCookieSupport()?1:0,network:this.wallOptions.network}),n=this.wallOptions.nodeUrl+"?"+t,i=io(n,{reconnectionDelay:2e3,reconnectionDelayMax:15e3});return i.on("reload wall",(function(){a.reloadWall(i)})),i.on("wallping",(function(t){e.serverStartedAt?e.serverStartedAt!==t.serverStartedAt&&a.reloadWall(i):e.serverStartedAt=t.serverStartedAt})),i}},{key:"initDynamicDisconnect",value:function(e){var t=this;$(document).on("visibilitychange",(function(){"visible"===document.visibilityState?(clearTimeout(t.disconnectTimeout),e.connected||(t.reconnectTimeout=setTimeout((function(){e.connect(),$("html").removeClass("socket-disconnected")}),1500))):(clearTimeout(t.reconnectTimeout),e.connected&&(t.disconnectTimeout=setTimeout((function(){e.disconnect(),$("html").addClass("socket-disconnected")}),48e4)))}))}},{key:"loadCachedCheckins",value:function(){return betterFetch.json(this.wallOptions.webAppPath+"/get_cached_checkins.json",{wallId:this.wallOptions.wallId}).then((function(e){return e.cachedCheckins}))}}],[{key:"reloadWall",value:function(e){e.disconnect(),$(document).off("visibilitychange");var t=Math.floor(500+1e4*Math.random());setTimeout((function(){location.reload()}),t)}},{key:"humanTimeDiff",value:function(e){if((e=Math.floor(e/1e3))<5)return n("THIS_MOMENT");if(e<60){var t=Math.floor(e);return i("A_SECOND_AGO","%s_SECONDS_AGO",t,t)}if(e<3600){var o=Math.floor(e/60);return i("A_MINUTE_AGO","%s_MINUTES_AGO",o,o)}if(e<86400){var a=Math.floor(e/3600);return i("AN_HOUR_AGO","%s_HOURS_AGO",a,a)}if(e<2592e3){var l=Math.floor(e/86400);return i("A_DAY_AGO","%s_DAYS_AGO",l,l)}var s=Math.floor(e/604800);return i("A_WEEK_AGO","%s_WEEKS_AGO",s,s)}},{key:"forceSSL",value:function(e){return _.isString(e)?e.replace(/^http:/i,"https:"):e}},{key:"showNotificationBar",value:function(e){var t=e.markup,n=e.autoshowhideInterval,i=e.displayTimeout,o=void 0===i?4e3:i,a=$(t);$(".wall-notifications").append(a),setTimeout((function(){a.addClass("wall-notification-visible"),n&&setInterval((function(){a.toggleClass("wall-notification-visible")}),n)}),o)}},{key:"loopInstructions",value:function(){var e=$(".post_instructions"),t=e.find("li"),n=e.find("li.is-visible");if(t.length){var i=n.next();i.length||(i=e.find("li").first());var l=i.text().length,s=Math.round(l/2),r=e.css("transition-timing-function").replace(/steps\(\d+/gi,"steps("+s);e.css("transition-timing-function",r),(new o).do((function(){e.addClass("post-instructions-hidden")})).wait(450).do((function(){n.removeClass("is-visible"),i.addClass("is-visible")})).wait(500).do((function(){e.removeClass("post-instructions-hidden")})).wait(7500).do(a.loopInstructions).run()}}},{key:"hasCookieSupport",value:function(){return!!_.isString(document.cookie)&&(!!navigator.cookieEnabled&&(document.cookie="cookieSupport=1",document.cookie.indexOf("cookieSupport")>=0))}},{key:"initClipboard",value:function(){new Clipboard("[data-clipboard-text]"),$("[data-clipboard-text]").on("click",(function(e){e.preventDefault();var t=$(this).next(".copied");t.addClass("copied-visible"),setTimeout((function(){return t.removeClass("copied-visible")}),3e3)}))}},{key:"initFilter",value:function(t,n){var i=$(".show-filter"),o=$(".filter-menu-reset"),a=$(".filter-menu-network");a.each((function(){var e=$(this);e.on("click",(function(){e.hasClass("filter-menu-network-selected")?(e.removeClass("filter-menu-network-selected"),n()):(a.removeClass("filter-menu-network-selected"),e.addClass("filter-menu-network-selected"),t(e.data("network")))}))})),i.on("click",(function(){e.toggleClass("show-filter-menu")})),o.on("click",(function(){a.removeClass("filter-menu-network-selected"),n()})),a.add(o).on("click",(function(){0===$(this).closest(".wall-toolbar").length&&e.removeClass("show-filter-menu"),window.scrollTo(0,0)}))}},{key:"addImageAndMessageClasses",value:function(e,t,n,i){var o=[],a=void 0;return a="wrapper"===t?"checkin-wrapper-":"checkin-",n&&i?o=[a+"with-image",a+"with-message",a+"with-image-and-message"]:n?o=[a+"with-image",a+"without-message"]:i&&(o=[a+"with-message",a+"without-image"]),e.addClass(o.join(" ")),e}},{key:"isAppScrollable",value:function(){return $("body").hasClass("scrollable")}},{key:"isIframe",value:function(){try{return window.self!==window.top}catch(e){return!0}}},{key:"isMobile",value:function(){return $("html").hasClass("mobile")}},{key:"isAutoheight",value:function(){return a.isIframe()&&$("html").hasClass("autoheight")}},{key:"isElementVisible",value:function(e){var t=$(e);return!t.is(":hidden")&&("hidden"!==t.css("visibility")&&(0!==parseInt(t.css("opacity"),10)&&(0===t.parent().length||t.parent()[0]===document||a.isElementVisible(t.parent()))))}},{key:"isInViewport",value:function(e){if(!a.isElementVisible(e))return!1;var n=e.getBoundingClientRect();return n.bottom>=0&&n.right>=0&&n.top<=t.height()&&n.left<=t.width()}},{key:"isMiddleInViewport",value:function(e){if(!a.isElementVisible(e))return!1;var n=e.getBoundingClientRect(),i=n.top+n.height/2,o=n.left+n.width/2;return i>=0&&i<=t.height()&&o>=0&&o<=t.width()}},{key:"getWallHeight",value:function(){return $("html")[0].scrollHeight}},{key:"hideWallInfo",value:function(){$("html").addClass("hide-wall-info")}},{key:"showWallInfo",value:function(e){$("html").removeClass("hide-wall-info"),$(".wall-info").text(e)}},{key:"updateTimestamps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;(t?$(".checkin-"+t).find(".checkin-timestamp"):$(".checkin-timestamp")).each((function(){var t=$(this).attr("data-timestamp"),i=void 0;t&&(i=(e||Date.now())-t,$(this).text(n.humanTimeDiff(i)))}))}},{key:"getWindowMode",value:function(){return t.width()>t.height()?"landscape":"portrait"}},{key:"isLandscape",value:function(){return"landscape"===a.getWindowMode()}},{key:"isPortrait",value:function(){return"portrait"===a.getWindowMode()}}]),a})();window.helpers.Wall=a})();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=(function(){function e(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){i=!0,n=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw n}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),_createClass=(function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}})();!(function(){var e=["post_image","external_image"],t=["post_image"],a=["post_image","external_image"],r=(function(){function r(e){_classCallCheck(this,r),this.wallOptions=e,helpers.autoBind(this)}return _createClass(r,[{key:"makeUrlAbsolute",value:function(e){return r.isAbsoluteUrl(e)?e:this.wallOptions.webAppPath+e}},{key:"getProxyHost",value:function(e){var t=this.wallOptions.proxyHosts;if(!_.isArray(t))return null;var a=t.length;return t[helpers.string.hash(e)%a]}},{key:"getProxyUrl",value:function(e,t,a){var i=this.getProxyHost(e);if(!i||!r.isAbsoluteUrl(e))return e;var n={src:e,w:this.wallOptions.proxyImageWidth,h:this.wallOptions.proxyImageHeight,q:this.wallOptions.proxyImageQuality,nu:1,salt:this.wallOptions.proxySalt};return t&&(n.key=t),this.wallOptions.proxyNoCache&&(n.nc=1),_.isPlainObject(a)&&(n=_.assign(n,a)),_.get(window,"devicePixelRatio",1)>=1.5&&(n.w&&(n.w=2*n.w),n.h&&(n.h=2*n.h)),e=i+"?"+$.param(n)}},{key:"proxyImage",value:function(e,t,a){return e=this.makeUrlAbsolute(e),e=this.getProxyUrl(e,t,a),e=helpers.Wall.forceSSL(e)}},{key:"prepareImages",value:function(a,i){var n=this;return _.each(e,(function(e){if(a[e]){var t=void 0,r=e+"_key",o=e+"_original";a[o]?a[e]=a[o]:a[o]=a[e],t="external_image"===e?_.assign({},i,{w:n.wallOptions.proxyProfileImageWidth,h:n.wallOptions.proxyProfileImageHeight}):i,a[e]=n.proxyImage(a[e],a[r],t)}})),_.each(t,(function(e){a=r.addPreviewImage(a,e)})),a.post_video&&(a.post_video=helpers.Wall.forceSSL(a.post_video)),a}},{key:"getAspectRatio",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e[t+"_aspect_ratio"];return i&&!1!==a.enableAspectRatioImages?r?i:i<a.minPostImageAspectRatio?a.minPostImageAspectRatio:i>a.maxPostImageAspectRatio?a.maxPostImageAspectRatio:i:a.defaultPostImageAspectRatio}}],[{key:"buildBase64Image",value:function(e){var t="data:image/jpg;base64,";if(e.indexOf("~")>-1){var a=e.split("~"),r=_slicedToArray(a,2);return t+"/9j/4AAQSkZJRgABAQEAYABgAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gNjAK/9sAQwANCQoLCggNCwoLDg4NDxMgFRMSEhMnHB4XIC4pMTAuKS0sMzpKPjM2RjcsLUBXQUZMTlJTUjI+WmFaUGBKUVJP/9sAQwEODg4TERMmFRUmTzUtNU9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09P/8AAEQgA"+r[0]+"AwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A"+r[1]}return t+e}},{key:"preloadImage",value:function(e){if(e){var t=new Image;try{t.src=e}catch(e){}}}},{key:"isAbsoluteUrl",value:function(e){return/^\w+:\/\//.test(e)}},{key:"addPreviewImage",value:function(e,t){var a=t+"_preview";if(e[a]){var i=".checkin-"+e.id+" .checkin-image-preview-holder",n=r.buildBase64Image(e[a]);helpers.Css.addRule(i,'background-image:url("'+n+'")')}return e}},{key:"preloadImages",value:function(e){_.each(a,(function(t){e[t]&&r.preloadImage(e[t])}))}},{key:"getTwoDominantColors",value:function(e){var t=e.post_image_dominant_colors;if(!t)return null;var a=t.split(",");return a.length<2?null:a.slice(0,2)}}]),r})();helpers.Image=r})();
"use strict";helpers.sharing=(function(){var n=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=555,r=400;return"twitter"===t&&(r=260),"googleplus"===t&&(e=400),window.open(n,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+e+",height="+r),!1};return{initSharingLinks:function(){$(document).on("click",helpers.actionSelector("share"),(function(t){t.preventDefault();var e=$(this);n(e.attr("href"),e.attr("data-network"))}))},openSharingWindow:n}})();
"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(i,t,o){return t&&e(i.prototype,t),o&&e(i,o),i}})();!(function(){var e=(function(){function e(i,t,o){_classCallCheck(this,e),this.isVideoAutochangeActive=!0,this.changeVideoTimeout=null,this.networksWithVideoEmbeds=i.networksWithVideoEmbeds,this.WallHelper=t,this.TemplatesHelper=o,helpers.autoBind(this)}return _createClass(e,[{key:"hasEmbeddedVideoSupport",value:function(e){return _.includes(this.networksWithVideoEmbeds,e.type)}},{key:"getVisibleVideoCheckins",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,i=$(".socialwall_container").find(".checkin"),t=_.chain(i).filter(this.WallHelper.isMiddleInViewport).filter((function(e){return!!$(e).data("video-url")})).shuffle().slice(0,e).value();return $(t)}},{key:"displayVideo",value:function(i){if(!i.hasClass("checkin-with-video")){i.addClass("checkin-with-video");var t=i.data("video-url"),o=i.find(".checkin-image"),n=i.find(".checkin-image-inner"),s=$(this.TemplatesHelper.build("checkin_video",{videoUrl:t}));n.length>0?s.prependTo(n):s.prependTo(o);var a=s.find("video"),l=0;void 0===Modernizr.videoautoplay&&(l=100),setTimeout((function(){Modernizr.videoautoplay&&e.play(a),e.mute(a)}),l)}}},{key:"displayNewVideos",value:function(i){var t=this;e.removeAllOtherVideos(i),i.each((function(e,i){t.displayVideo($(i))}))}},{key:"changeVideos",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.changeVideoTimeout),this.changeVideoTimeout=setTimeout((function(){if(e.isVideoAutochangeActive)if(Modernizr.videoautoplay){var i=e.getVisibleVideoCheckins(3);0===i.length?e.changeVideos(1e3):(e.displayNewVideos(i),e.changeVideos(15e3))}else{var t=e.getVisibleVideoCheckins();e.displayNewVideos(t),e.changeVideos(400)}}),i)}},{key:"setVideoAutochangeActive",value:function(i){this.isVideoAutochangeActive=i,!1===i?e.removeAllVideos():this.changeVideos(0)}},{key:"initChangeVideoOnScrollListener",value:function(){var e=this,i=$(window),t=i.scrollTop();i.on("scroll",_.throttle((function(){var o=i.scrollTop(),n=i.height();Math.abs(o-t)<n/2||(e.changeVideos(),t=i.scrollTop())}),300))}},{key:"initEventListeners",value:function(){if(e.isVideoSupportedByBrowser()){var i=$(".socialwall_container, .detail-mount-point");i.on("click",".video-mute-button",(function(){var i=$(this).closest(".video-wrapper"),t=i.find("video");return i.hasClass("video-muted")?(e.unmute(t),e.muteAllOtherVideos(t)):e.mute(t),!1})),i.on("click",".video-play-button",(function(){var i=$(this).closest(".checkin-image-wrapper").find(".checkin-video");return!i.length||(e.play(i),!1)})),this.initChangeVideoOnScrollListener()}}},{key:"init",value:function(){this.initEventListeners(),this.changeVideos(2e3)}}],[{key:"hasRealVideo",value:function(e){return!!e.post_video}},{key:"setPlayClasses",value:function(e){e.closest(".video-wrapper").addClass("video-playing"),e.closest(".checkin").addClass("checkin-with-video-playing")}},{key:"setPauseClasses",value:function(e){e.closest(".video-wrapper").removeClass("video-playing"),e.closest(".checkin").removeClass("checkin-with-video-playing")}},{key:"play",value:function(i){var t=$(i).eq(0),o=(i=t.get(0)).play();o&&o.then?o.then((function(){e.setPlayClasses(t)})):e.setPlayClasses(t)}},{key:"pause",value:function(i){var t=$(i).eq(0);(i=t.get(0)).pause(),e.setPauseClasses(t)}},{key:"mute",value:function(e){var i=$(e).eq(0);(e=i.get(0)).muted=!0,i.closest(".video-wrapper").addClass("video-muted")}},{key:"unmute",value:function(e){var i=$(e).eq(0);(e=i.get(0)).muted=!1,i.closest(".video-wrapper").removeClass("video-muted")}},{key:"muteVimeoEmbed",value:function(e){var i=e.find(".checkin-video-embed");0!==i.length&&"vimeo"===e.data("type")&&i.get(0).contentWindow.postMessage(JSON.stringify({method:"setVolume",value:0}),"*")}},{key:"removeVideoClasses",value:function(e){var i=$(e).eq(0).closest(".video-wrapper");i.removeClass("video-muted video-playing"),i.closest(".checkin").removeClass("checkin-with-video checkin-with-video-playing")}},{key:"muteAllOtherVideos",value:function(i){var t=i.get(0);$(".checkin-video").each((function(i,o){o!==t&&e.mute(o)}))}},{key:"destroyVideo",value:function(i){var t=$(i).eq(0);(i=t.get(0))&&(e.pause(i),setTimeout((function(){e.removeVideoClasses(i),t.closest(".video-wrapper").remove()}),0))}},{key:"removeAllOtherVideos",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=$(".socialwall_container").find(".checkin-with-video");i&&i.length&&(t=t.filter((function(e,t){return!_.includes(i.toArray(),t)}))),t.removeClass("checkin-with-video"),t.each((function(i,t){e.destroyVideo($(t).find(".checkin-video"))}))}},{key:"removeAllVideos",value:function(){e.removeAllOtherVideos(null)}},{key:"initVideo",value:function(e,i){var t=e.post_video;t&&i.attr("data-video-url",t)}},{key:"isVideoSupportedByBrowser",value:function(){return"play"in document.createElement("video")}}]),e})();window.helpers.Video=e})();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}})();!(function(){var e=(function(){function e(t,n){_classCallCheck(this,e),this.wallOptions=t,this.wallState=n,this.bottomAddedCheckinsCounter=1,this.topAddedCheckinsCounter=1,helpers.autoBind(this)}return _createClass(e,[{key:"isNewAdNeeded",value:function(){var e=this.wallState.getSortedCheckinsData(),t=this.wallOptions.adsFrequency,n=Math.ceil(.15*t);return t+=_.random(-n,n),this.wallState.checkinsDataSize<t&&!e.some((function(e){return"sponsored"===e.type}))||!e.slice(0,t).some((function(e){return"sponsored"===e.type}))}},{key:"createCheckinDataFromAd",value:function(e){var t={};return t.id=e.id+"-"+Date.now(),t.post_id=e.id,t.post_image=e.image,t.post_image_aspect_ratio=e.image_aspect_ratio,t.post_image_key=e.image_key,t.post_image_dominant_colors=e.image_dominant_colors,t.post_link=e.link,t.type="sponsored",t=new helpers.Image(this.wallOptions).prepareImages(t,{q:95}),helpers.Image.preloadImages(t),t=this.prepareRankingData(t,"top"),t=this.makeCheckinTopRanked(t,this.wallState)}},{key:"getSortField",value:function(){return{weight:"weight",time:"external_created_timestamp",addOrder:"addOrder"}[this.wallOptions.clientRankingMode]}},{key:"addSortScoreToCheckin",value:function(e){var t=this.getSortField(),n=this.wallOptions.clientRankingMode,a=["weight","time"];if(!t)return e.sortScore=0,e;var i=e[t],r=e.bonus||0;return _.includes(a,n)&&(i+=r),e.sortScore=i,e}},{key:"makeCheckinTopRanked",value:function(e){var t=this.wallState.getSortedCheckinsData().first(),n=void 0,a=void 0,i=void 0;return t&&("weight"===this.wallOptions.clientRankingMode?(a=t.weight+t.bonus,i=e.weight):"time"===this.wallOptions.clientRankingMode?(a=t.external_created_timestamp+t.bonus,i=e.external_created_timestamp):"addOrder"===this.wallOptions.clientRankingMode&&(a=t.addOrder+t.bonus,i=e.addOrder),n=a-i+1,n=Math.max(n,0),e.bonus=n),e=this.addSortScoreToCheckin(e)}},{key:"prepareRankingData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.bonus=e.bonus||0,e.weight=e.weight||0,e.external_created_timestamp=e.external_created_timestamp||0,"top"===t?(e.addOrder=this.topAddedCheckinsCounter,this.topAddedCheckinsCounter++):"bottom"===t?(e.addOrder=-1*this.bottomAddedCheckinsCounter,this.bottomAddedCheckinsCounter++):n&&n.addOrder&&(e.addOrder=n.addOrder),e=this.addSortScoreToCheckin(e)}}],[{key:"compare",value:function(e,t){var n=[],a=_.intersection(_.keys(e),_.keys(t));return _.each(a,(function(a){_.isEqual(e[a],t[a])||n.push(a)})),n}},{key:"prepareComment",value:function(e,t){if(!e.html_comment)return e;var n=e.comment,a=e.html_comment,i=t,r=n.length;return a=helpers.truncateTransformedTextPrecise(a,i,r),e.truncated_html_comment=a,e}}]),e})();window.helpers.Checkins=e})();
"use strict";function _classCallCheck(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function a(a,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(o,t,i){return t&&a(o.prototype,t),i&&a(o,i),o}})();!(function(){var a=(function(){function a(o){_classCallCheck(this,a),this.wallOptions=o,this.originalLocation={hash:location.hash,host:location.host,hostname:location.hostname,href:location.href,origin:location.origin,pathname:location.pathname,port:location.port,protocol:location.protocol,search:location.search}}return _createClass(a,[{key:"getWallUrl",value:function(){var a=this.wallOptions.wallUrl;return this.originalLocation.search&&(a+=this.originalLocation.search),this.originalLocation.hash&&(a+=this.originalLocation.hash),a}},{key:"getDetailUrl",value:function(a){var o=this.wallOptions.wallUrl+"/p/"+a;return this.originalLocation.search&&(o+=this.originalLocation.search),this.originalLocation.hash&&(o+=this.originalLocation.hash),o}},{key:"getCompactDetailUrl",value:function(a){return this.wallOptions.webAppPath+"/s/"+a}}]),a})();window.helpers.Url=a})();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,l,r){return l&&e(t.prototype,l),r&&e(t,r),t}})();!(function(){var e=(function(){function e(t){_classCallCheck(this,e),this.urlHelper=new helpers.Url(t)}return _createClass(e,[{key:"setUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.history.pushState){var l=this.urlHelper.getCompactDetailUrl(e);t?window.history.replaceState({detail:e},null,l):window.history.pushState({detail:e},null,l)}}},{key:"clearUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(window.history.pushState){var t=this.urlHelper.getWallUrl();e?window.history.replaceState({detail:null},null,t):window.history.state&&window.history.state.detail&&window.history.pushState({detail:null},null,t)}}}]),e})();window.helpers.Route=e})();
"use strict";!(function(){var e=$("body"),l=$("html, body"),n=(screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,(function(){screenfull.isFullscreen?(l.addClass("fullscreen"),scrollTo(0,0)):l.removeClass("fullscreen")})),{enter:function(){screenfull.enabled&&screenfull.request()},leave:function(){screenfull.enabled&&screenfull.exit()},isSupported:function(){return screenfull.enabled},isFullscreen:function(){return screenfull.isFullscreen},getFullscreenChangeEventName:function(){return _.get(screenfull,"raw.fullscreenchange")}});screenfull.enabled&&(e.addClass("fullscreen-support"),e.on("click",".fullscreen-enter",n.enter),e.on("click",".fullscreen-leave",n.leave)),window.WallsioFullscreen=n})();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}})();!(function(){var t=(function(){function t(e,i,a){_classCallCheck(this,t),this._stack=Immutable.List(),this._checkinsData=Immutable.Map(),this._sortedCheckinsData=Immutable.List(),this._newCheckinSortScoreThreshold=-1/0,this.wallOptions=e,this.isAppScrollable=i,this.getTilesLimit=a,helpers.autoBind(this)}return _createClass(t,[{key:"addToStack",value:function(t){this._stack=this._stack.push(t)}},{key:"shiftStack",value:function(){var t=this._stack.first();return this._stack=this._stack.shift(),t}},{key:"filterStack",value:function(t){this._stack=this._stack.filter(t)}},{key:"truncateStack",value:function(t){this._stack=this._stack.takeLast(t)}},{key:"truncateCheckinData",value:function(t){var e=this.getSortedCheckinsData().slice(t);if(0!==e.size){var i=e.map((function(t){return t.id}));this.removeCheckinData(i.toArray())}}},{key:"isStackEmpty",value:function(){return 0===this.stackSize}},{key:"isCheckinsDataEmpty",value:function(){return 0===this.checkinsDataSize}},{key:"getCheckinData",value:function(e){e=t.normalizeCheckinId(e);return this._checkinsData.get(e,null)}},{key:"hasCheckin",value:function(e){return e=t.normalizeCheckinId(e),this._checkinsData.has(e)}},{key:"setCheckinData",value:function(e,i){e=t.normalizeCheckinId(e),this._checkinsData=this._checkinsData.set(e,i),this.updateSortedCheckinsData()}},{key:"removeCheckinData",value:function(e){_.isArray(e)||(e=[e]),e=_.map(e,t.normalizeCheckinId),this._checkinsData=this._checkinsData.deleteAll(e),this.updateSortedCheckinsData()}},{key:"getAllCheckinsData",value:function(){return this._checkinsData}},{key:"getSortedCheckinsData",value:function(){return this._sortedCheckinsData}},{key:"getCheckinIds",value:function(){return this._checkinsData.keySeq().toList()}},{key:"updateSortedCheckinsData",value:function(){var t=this._checkinsData.toList(),e=!0,i=!1,a=void 0;try{for(var n,s=this.checkinsDataSortFunctions[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var r=n.value;t=t.sortBy(r)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}this._sortedCheckinsData=t,this.updateNewCheckinSortScoreThreshold()}},{key:"updateNewCheckinSortScoreThreshold",value:function(){if(!this.isAppScrollable)return!1;var t=this.getTilesLimit(this.wallOptions,!0),e=Math.round(t/2);if(this._sortedCheckinsData.size<e)return!1;var i=e-1,a=this._sortedCheckinsData.get(i);if(!a||!a.sortScore)return!1;this._newCheckinSortScoreThreshold=a.sortScore}},{key:"stackSize",get:function(){return this._stack.size}},{key:"checkinsDataSize",get:function(){return this._sortedCheckinsData.size}},{key:"newCheckinSortScoreThreshold",get:function(){return this._newCheckinSortScoreThreshold}},{key:"checkinsDataSortFunctions",get:function(){var t=[];return t.push((function(t){return-1*t.sortScore})),t}}],[{key:"normalizeCheckinId",value:function(t){return t.toString()}}]),t})();window.WallState=t})();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}})();!(function(){var t=(function(){function t(e){_classCallCheck(this,t),this.helpers=e,this.history=new Immutable.Map,e.autoBind(this),setInterval(this.cleanup,6e4)}return _createClass(t,[{key:"getCountInLastMinute",value:function(){var t=this.helpers.getUnixTimestamp();return this.history.reduce((function(e,n,i){return i>=t-60?e+n:e}),0)}},{key:"track",value:function(){var t=this.helpers.getUnixTimestamp(),e=this.history.get(t,0);e++,this.history=this.history.set(t,e)}},{key:"cleanup",value:function(){var t=this.helpers.getUnixTimestamp()-120;this.history=this.history.filter((function(e,n){return n>t}))}}]),t})();window.WallCheckinsPerSecondHistory=t})();
"use strict";function _classCallCheck(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function o(o,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,i.key,i)}}return function(t,n,i){return n&&o(t.prototype,n),i&&o(t,i),t}})();!(function(){var o=$(window),t=$(document),n=function(t){o.scrollTop(t)},i=function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},e=function(o){return(1-Math.cos(Math.PI*o))/2},r=function(o){if(!o)return 0;var t=Math.abs(o/3);return _.clamp(t,200,1e3)},l=(function(){function l(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.bottomRegionHeight,n=o.topRegionHeight;_classCallCheck(this,l),this.bottomRegionHeight=t,this.topRegionHeight=n,this.lastScrollPosition=0,helpers.autoBind(this)}return _createClass(l,[{key:"smoothScroll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=void 0,s=new Promise(function(o,t){l=o}),c=o.scrollTop(),a=t-c,u=r(a),h=i();return requestAnimationFrame((function o(){var r=(i()-h)/u,l=e(r),s=c+l*a;r<1?(n(s),requestAnimationFrame(o)):n(t)})),setTimeout((function(){n(t),l()}),u),s}},{key:"isCurrentScrollPositionInTopRegion",value:function(){return o.scrollTop()<=this.topRegionHeight}},{key:"wasLastScrollPositionInTopRegion",value:function(){return this.lastScrollPosition<=this.topRegionHeight}},{key:"isCurrentScrollPositionInBottomRegion",value:function(){return o.scrollTop()+o.height()>=t.height()-this.bottomRegionHeight}},{key:"isCurrentScrollPositionAbsoluteBottom",value:function(){return o.scrollTop()+o.height()>=t.height()-1}},{key:"wasLastScrollPositionInBottomRegion",value:function(){var n=o.height(),i=t.height()-this.bottomRegionHeight;return this.lastScrollPosition+n>=i}},{key:"hasScrolledIntoBottom",value:function(){return!!this.isCurrentScrollPositionInBottomRegion()&&(!!this.isCurrentScrollPositionAbsoluteBottom()||!this.wasLastScrollPositionInBottomRegion())}},{key:"hasScrolledIntoTop",value:function(){return!!this.isCurrentScrollPositionInTopRegion()&&!this.wasLastScrollPositionInTopRegion()}},{key:"fireCustomScrollEvents",value:function(){var n=o.scrollTop();n>this.lastScrollPosition?(t.trigger("wall.scrollDown"),this.hasScrolledIntoBottom()&&t.trigger("wall.scrollIntoBottom")):(t.trigger("wall.scrollUp"),this.hasScrolledIntoTop()&&t.trigger("wall.scrollIntoTop")),this.lastScrollPosition=n}},{key:"initScrollEvents",value:function(){var t=this;o.on("scroll",_.throttle((function(){t.fireCustomScrollEvents()}),150))}}]),l})();window.WallScrolling=l})();
"use strict";!(function(e){var n=void 0,t=void 0,i=void 0,o=void 0,r=void 0,a=void 0,l=helpers.translation,s=helpers.sharing,c=new WallCheckinsPerSecondHistory(helpers),d={},h=e(window),u=e(document),m=e("html"),p=e("body"),f=void 0,g=!0,k=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];g=!!e},v=function(){return g},C=function(e){return function(){console.error("The method "+e+" must be overridden!")}};_.assign(d,{messages:{},defaults:{proxyHosts:null,proxyImageWidth:400,proxyImageHeight:400,proxyImageQuality:85,proxyProfileImageHeight:100,proxyProfileImageWidth:100,rankingMode:"time",proxyNoCache:!1,proxySalt:"",wallId:0,revealInterval:3e3,displayNextCheckInterval:100,container:"",animation:!0,webAppPath:null,isAdsEnabled:!1,adsFrequency:null,ads:[],additionalCheckins:null,network:null},themeParams:{domUpdateTriggers:["comment","entities","external_created_timestamp","external_fullname","external_image","external_name","external_user_id","is_highlighted","post_image","post_image_aspect_ratio","post_link","tags"],maxCommentLength:160},methods:{countTilesAboveTheFold:function(){var n=0,t=h.height(),i=d.getSortedCheckinsData(),o=!0,r=!1,a=void 0;try{for(var l,s=i[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,u=e(".checkin-wrapper-"+c.id);if(0!==u.length){if(u.offset().top>t)break;n+=1}}}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n},domPrependCheckins:function(e,n){e.prepend(n)},domAppendCheckins:function(e,n){e.append(n)},domRemoveCheckins:function(e,n){n.remove()},domCreateCheckin:C("domCreateCheckin"),domReplaceCheckin:function(e,n,t,i){var o=d.methods.domCreateCheckin(t,i);if(!o)return!1;n.replaceWith(o.find(".checkin"))},getTilesLimit:function(){return C("getTilesLimit")},getSupportedRankingMode:function(e){return e},isDetailViewSupported:function(){return!0},getNumberOfInitialCheckins:function(){return 30},getNumberOfCheckinsToFillScreen:function(){return 30},getBottomRegionHeight:function(){return 600},initTheme:C("initTheme")}}),d.create=function(g){d.defaults.initialCheckins=d.methods.getNumberOfInitialCheckins(),g.initialCheckins&&!isNaN(g.initialCheckins)||delete g.initialCheckins;var C=e.extend({},d.defaults,g);C.$container=e(".socialwall_container"),C.serverRankingMode=C.rankingMode,C.clientRankingMode=d.methods.getSupportedRankingMode(C.rankingMode),a=new helpers.Wall(C);var w=new WallState(C,helpers.Wall.isAppScrollable(),d.methods.getTilesLimit);n=new helpers.Checkins(C,w),t=new helpers.Image(C),i=new helpers.Route(C),o=new helpers.Url(C),r=new helpers.Video(C,helpers.Wall,helpers.Templates);var S=new WallScrolling({bottomRegionHeight:600,topRegionHeight:300}),I=null,T=void 0,W=!1,y=!1,D=C.ads,b=null,x=null,A=!0,F=!1,R=null,N=function(){};d.WallsioDetailView&&(N=new d.WallsioDetailView(C));var P=function(e){return C[e]?C[e]:null},M=function(e,n){return void 0!==C[e]&&(C[e]=n,!0)},O=helpers.actionSelector,U=function(){return!!d.methods.isDetailViewSupported()&&(!!WallsioFullscreen.isSupported()||!helpers.Wall.isIframe())},z=function(){return T},E=function(e){T=e,m.toggleClass("load-more-disabled",!e)},H=function(){b=Date.now()},L=function(){var e=6e4/C.revealInterval;return c.getCountInLastMinute()>e},V=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return d.methods.getTilesLimit(C,e)},$=function(){return y?L()?10:V(!0):1/0},q=function(e,n){w.isCheckinsDataEmpty()&&helpers.Wall.hideWallInfo(),w.setCheckinData(e,n)},Q=function(){var n=helpers.integer.ceilTo,t=d.defaults.proxyImageWidth,i=d.defaults.proxyImageHeight,o=e(".checkin").eq(0),r=Math.max(o.outerWidth(),t),a=Math.max(o.outerHeight(),i);r=n(r,50),a=n(a,50),M("proxyImageWidth",r),M("proxyImageHeight",a)},B=function(e){return e.detailUrl=o.getDetailUrl(helpers.slug.fromId(e.id)),e.compactDetailUrl=o.getCompactDetailUrl(helpers.slug.fromId(e.id)),e},G=function(e){var n=C.maxCommentLength||d.themeParams.maxCommentLength;return helpers.Checkins.prepareComment(e,n)},j=function(e,i,o){return e.isPrepared?e:(e=n.prepareRankingData(e,i,o),e=t.prepareImages(e),e=a.prepareEntities(e),e=B(e),e=G(e),e.isPrepared=!0,helpers.Image.preloadImages(e),e)},J=function(e){R&&R!==e.type||(q(e.id,e),w.addToStack(e),y&&c.track(),w.truncateStack($()))},K=function(e){return _.intersection(e,d.themeParams.domUpdateTriggers).length>0},X=function(){var e=["sortScore"],t=n.getSortField();return t&&e.push(t),e},Y=function(e){return _.intersection(e,X()).length>0},Z=function(n){var t=n.id,i=e(".socialwall_container").find(".checkin-"+t);if(0===i.length)return!1;var o=w.getCheckinData(t);if(!o)return!1;n=j(n,"replace",o);var r=helpers.Checkins.compare(o,n);return 0!==r.length&&(q(t,n),K(r)?(d.methods.domReplaceCheckin(C.$container,i,n,C),helpers.Wall.updateTimestamps(I,n.id)):Y(r)&&u.trigger("wall.sortUpdateNeeded",[C]),!0)},ee=function(){if(D.length){var e=_.sample(D),t=n.createCheckinDataFromAd(e,w);J(t)}},ne=function(){C.isAdsEnabled&&C.adsFrequency&&D.length&&n.isNewAdNeeded()&&ee()},te=function(n){_.isArray(n)||(n=[n]);var t=e();e(".checkin-wrapper").filter(".is-protected").each((function(t,i){n=_.without(n,e(i).attr("data-id"))})),_.each(n,(function(n){t=t.add(e(".socialwall_container").find(".checkin-wrapper-"+n))})),w.removeCheckinData(n),d.methods.domRemoveCheckins(C.$container,t)},ie=function(e){var n=w.getSortedCheckinsData().takeLast(e).map((function(e){return e.id})).toArray();te(n)},oe=function(){var n=e(".checkin").length,t=w.checkinsDataSize;return Math.min(n,t)},re=function(e){var n=oe();return!(n<=e)&&(ie(n-e),!0)},ae=function(){p.removeClass("new-checkins-notification-visible")},le=function(){p.addClass("new-checkins-notification-visible")},se=function(n){for(var t=e("<div>"),i=[],o=0;o<n&&"break"!==(function(e){var n=w.shiftStack();if(!n)return"break";var o=d.methods.domCreateCheckin(n,C);if(!o)return"break";t.prepend(o),i.push(n.id),C.animation?setTimeout((function(){return o.addClass("is-visible")}),50):o.css("display","block")})();o++);d.methods.domPrependCheckins(C.$container,t.contents()),_.each(i,(function(e){helpers.Wall.updateTimestamps(I,e)})),S.isCurrentScrollPositionInTopRegion()&&re(V()),i.length>0&&H()},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;w.isStackEmpty()||(A?se(e):e>0&&le())},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!W&&z()){e||(e=d.methods.getNumberOfCheckinsToFillScreen(),helpers.Wall.isAutoheight()&&(e=Math.min(e,30)));var n={count:e,network:R},t=w.getSortedCheckinsData().last();if(t){var i=void 0;i="weight"===C.serverRankingMode?"weight":"external_created_timestamp",n.olderThan=t[i],n.ignoreId=t.id}f.emit("request older checkins",n)}},he=function(e,n){var t=w.getCheckinData(e);t?n(t):f.emit("get single checkin",e,n)},ue=function(n){if(U()){var i=helpers.slug.toId(n);m.addClass("show-detail show-detail-loading");var o=e(".detail-mount-point");he(i,(function(n){if(!_.get(n,"id"))return!1;n=j(n),n=t.prepareImages(n,{w:null,h:null}),helpers.Image.preloadImages(n),o.html(N.createDom(n));var i=e(".detail-container");n.comment&&N.resizeText(n.comment.length),i.find(".detail-image").length>0?(N.resizeQuick(),i.imagesLoaded({background:".detail-image"},(function(){N.resize(),m.removeClass("show-detail-loading")}))):m.removeClass("show-detail-loading"),helpers.Video.hasRealVideo(n)&&(r.setVideoAutochangeActive(!1),helpers.Video.play(i.find(".detail-video-wrapper video")))})),h.on("resize",N.resizeQuickThrottled)}},me=function(){m.removeClass("show-detail show-detail-loading"),h.off("resize",N.resizeQuickThrottled);var n=e(".detail-inner"),t=n.children();r.setVideoAutochangeActive(!0),setTimeout((function(){var e=n.find("video");e.length>0&&helpers.Video.destroyVideo(e),t.remove()}),300)},pe=function(e,n){U()&&(helpers.Wall.isIframe()&&WallsioFullscreen.isSupported()&&!WallsioFullscreen.isFullscreen()&&(WallsioFullscreen.enter(),F=!0),ue(e),i.setUrl(e,n))},fe=function(){U()&&(F&&(WallsioFullscreen.leave(),F=!1),me(),i.clearUrl(!1))},ge=function(){y=!0,helpers.Tracking.trackGaTiming("wallinit","Wall","init"),u.trigger("wall.init"),p.removeClass("wall-loading"),m.removeClass("wall-loading"),m.addClass("wall-initialized")},ke=function(){var e=oe(),n=d.methods.getNumberOfCheckinsToFillScreen();n>e&&de(n-e)},ve=function(){if(!x){x=setInterval((function(){Date.now()-b>C.revealInterval&&ce(1)}),C.displayNextCheckInterval)}},Ce=function(e){var n=w.getSortedCheckinsData().first();return!!n&&n.external_created_timestamp-e.external_created_timestamp>6048e5},we=function(e){return!(w.checkinsDataSize>=C.initialCheckins)||!(e.sortScore<w.newCheckinSortScoreThreshold)&&("addOrder"!==C.clientRankingMode||!Ce(e))},Se=function(e){return R?_.filter(e,(function(e){return e.type===R})):e},_e=function(n){if(y||ve(),(n=Se(n))&&n.length>0||y)n.reverse(),_.each(n,(function(e){w.hasCheckin(e.id)||(e=j(e,"top"),we(e)&&(J(e),ne()))})),y||(ce(w.stackSize),_.defer((function(){ge(),setTimeout((function(){e(".loading-indicator").remove()}),500)})),C.detailCheckinHash&&pe(C.detailCheckinHash,!0));else{ge();var t=l.__("NO_POSTS_FOUND");setTimeout((function(){return helpers.Wall.showWallInfo(t)}),300)}},Ie=function(n){var t=e("<div>");n=Se(n),_.each(n,(function(e){if(!w.hasCheckin(e.id)){e=j(e,"bottom"),q(e.id,e);var n=d.methods.domCreateCheckin(e,C);n&&t.append(n.addClass("is-visible"))}})),d.methods.domAppendCheckins(C.$container,t.contents()),H(),helpers.Wall.updateTimestamps(I)},Te=function(e){_e([e])},We=function(){a.loadCachedCheckins().then((function(e){e&&_e(e)}))},ye=function(){w.isCheckinsDataEmpty()&&We()},De=function(){clearInterval(x),W=!0,f.disconnect()},be=function(){(A=S.isCurrentScrollPositionInTopRegion())&&ae()},xe=function(e){var n=w.getAllCheckinsData().filter((function(n){return n.type!==e})).map((function(e){return e.id})).toArray();R=e,E(!0),te(n),w.filterStack((function(e){return e.type===R})),ke()},Ae=function(){R&&(re(0),R=null,E(!0),ke())},Fe=function(){var n=new PostmessageApi(d,helpers.Wall);S.initScrollEvents(),n.initDomEvents(),C.$container.on("click",O("show-detail"),(function(){if(!U())return!0;var n=e(this).closest(".checkin").data("id"),t=helpers.slug.fromId(n);return pe(t),!1})),u.on("click",O("hide-detail"),(function(e){if(e.target===this)return fe(),!1})),u.on("click",O("close-wall-notification"),(function(){var n=e(this).closest(".wall-notification");return n.removeClass("wall-notification-visible"),setTimeout((function(){n.remove()}),500),!1})),e(O("release-checkins")).on("click",(function(){return S.smoothScroll(0),A=!0,!1})),e(O("scroll-to-top")).on("click",(function(){return S.smoothScroll(0),!1})),u.on("wall.scrollIntoTop",(function(){re(V())})),u.on("wall.scrollIntoBottom",(function(){de(C.additionalCheckins)})),u.on("keydown",(function(e){27===e.which&&fe()})),h.on("resize",_.debounce((function(){Q(),v()&&ke()}),500)),e(".detail-container").on("click","a[href='']",(function(e){e.preventDefault()})),document.visibilityState&&!W&&a.initDynamicDisconnect(f),U()&&window.history.pushState&&(window.onpopstate=function(e){e.state&&(e.state.detail?ue(e.state.detail):me())})},Re=function(){(f=a.getWallSocket()).on("wallping",(function(e){I=e.serverTime})),f.on("new checkins",_e),f.on("old checkins",Ie),f.on("no more old checkins",(function(){if(helpers.Wall.isIframe()&&PostmessageApi.sendPostMessage("Wallsio.triggerDomEvent","WallsioNoMorePosts"),E(!1),w.isCheckinsDataEmpty()&&R){var e=l.__("NO_POSTS_FOUND");helpers.Wall.showWallInfo(e)}})),f.on("looped post",(function(e){e&&(te(e.id),(e=n.makeCheckinTopRanked(e)).isLooped=!0,e=j(e,"top"),J(e),ne())})),f.on("removed checkins",(function(e){e=_.map(e,WallState.normalizeCheckinId);var n=w.getCheckinIds().toArray(),t=_.intersection(n,e);_.each(t,(function(e){te(e)}))})),f.on("update checkin data",(function(e){return!!e.id&&(w.hasCheckin(e.id)?(Z(e),!0):"weight"===C.clientRankingMode&&((e=n.addSortScoreToCheckin(e)).sortScore>w.newCheckinSortScoreThreshold&&(Te(e),!0)))})),f.on("stop",De),f.on("connect_error",ye),f.on("subscribe error",ye)};!(function(){var n=e("<div>").addClass("checkin-wrapper");e("<div>").addClass("checkin").appendTo(n),n.appendTo(".socialwall_container"),Q(),n.remove()})(),(function(){_.assign(d,{isAutofillEnabled:v,setAutofillEnabled:k,getOption:P,setOption:M,getSortedCheckinsData:w.getSortedCheckinsData,getCheckinData:w.getCheckinData,requestOlderCheckins:de,applyFilter:xe,removeFilter:Ae,options:C}),helpers.Wall.isIframe()&&e("html").addClass("iframe"),E(!0),Re(),h.on("scroll",_.throttle((function(){be()}),150));var n=WallsioFullscreen.getFullscreenChangeEventName();n&&u.on(n,(function(){!WallsioFullscreen.isFullscreen()&&helpers.Wall.isIframe()&&fe()})),setInterval((function(){helpers.Wall.updateTimestamps(I)}),3e4),Fe(),U()&&i.clearUrl(!0)})(),d.methods.initTheme(C),helpers.Wall.initClipboard(),helpers.Wall.initFilter(xe,Ae),a.initUser(),a.generateInstructions(),helpers.Wall.loopInstructions(),l.translateText(),s.initSharingLinks(),r.init(),C.startInStaticMode&&We(),e((function(){helpers.Tracking.trackGaTiming("domready","Wall","domready")}))},window.Wall=d})(jQuery);
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}})();!(function(){var e=(function(){function e(t){_classCallCheck(this,e),this.wallOptions=t,this.videoHelper=new helpers.Video(t),helpers.autoBind(this),this.resizeQuickThrottled=_.throttle(this.resizeQuick,100)}return _createClass(e,[{key:"createDom",value:function(e){var t=helpers.Templates.build,i=helpers.checkins.getFullName(e),a=helpers.checkins.getCombinedName(e),n=e.post_image_aspect_ratio||1,l=Date.now()-e.external_created_timestamp,s=e.post_id,r=e.post_image,o=e.post_link,d=e.type,h=e.compactDetailUrl,m=e.html_comment||"",c=helpers.translation.__("DETAIL_SHARING_TEXT"),u=this.wallOptions.twitterVia,g=e.post_video,p=void 0;g?p=t("detail/video",{postImage:r,postVideo:g}):this.videoHelper.hasEmbeddedVideoSupport(e)&&(p=t("embeds/"+d+"_embed",{mute:!1,token:s}));var f=t("detail/post_image",{imageAspectRatio:n,postImage:r,postLink:o,postVideoElement:p}),v=t("detail/user",{combinedName:a,humanTimeDiff:helpers.Wall.humanTimeDiff(l),network:d,postLink:o,userImage:e.external_image,userName:i,userLink:e.external_user_link}),w=t("detail/content",{detailSharingElement:t("detail/sharing",{link:h,text:c,twitterVia:u}),detailUserElement:v,hasImage:!!r,hasVideo:!!g,id:e.id,message:m,network:d,postImageElement:f}),k=t("detail/menu_sharing",{link:h,text:c,twitterVia:u}),_=$(t("detail/container",{detailContent:w,detailMenuSharing:k}));return this.initDomEvents(_),_}},{key:"initDomEvents",value:function(e){var t=helpers.actionSelector;e.on("click",t("show-detail-menu-sharing"),(function(){return $(".detail-menu-sharing").addClass("detail-menu-sharing-expanded"),!1})),e.on("click",t("prevent-default"),(function(e){e.preventDefault()})),e.on("click",t("detail-copy-link"),(function(t){t.preventDefault();var i=e.find(".detail-link-copied");i.addClass("copied-visible"),setTimeout((function(){return i.removeClass("copied-visible")}),3e3)}))}},{key:"setDimensions",value:function(e,t){if(e.css({height:"",width:""}),$(window).width()>=840){var i=e.height()*t;e.css({width:i})}else{var a=e.width()/t;e.css({height:a})}}},{key:"resizeQuick",value:function(){var e=$(".detail-image");if(0!==e.length){var t=e.data("aspect-ratio")||1,i=e.data("raw-width"),a=e.data("raw-height");this.setDimensions(e,t),this.handleSmallImage(e,i,a)}}},{key:"resetSmallImage",value:function(e){e.removeClass("detail-image-too-small"),e.find(".detail-image-inner").css({width:"",height:""})}},{key:"handleSmallImage",value:function(e,t,i){if($(window).width()<840)this.resetSmallImage(e);else if(t&&i){var a=e.width(),n=1.1*i<e.height();1.1*t<a&&n?(e.addClass("detail-image-too-small"),e.find(".detail-image-inner").css({width:t,height:i})):this.resetSmallImage(e)}}},{key:"resize",value:function(){var e=this,t=$(".detail-image");if(0!==t.length){var i=new Image;i.src=t.data("image"),i.onload=function(){var a=i.width/i.height;a&&(e.setDimensions(t,a),e.handleSmallImage(t,i.width,i.height),t.data("aspect-ratio",a),t.data("raw-width",i.width),t.data("raw-height",i.height))}}}},{key:"resizeText",value:function(e){var t=1.6-.0025*e,i=_.clamp(t,.6,1.6);$(".detail-message-inner").css("font-size",i+"em")}}]),e})();Wall.WallsioDetailView=e})();
"use strict";$((function(){var o=!1,n=null,e=$("body"),t=function(){o=!0,e.addClass("mousemoving")},u=function(){o=!1,e.removeClass("mousemoving")},s=function(){clearTimeout(n),n=setTimeout(u,2e3)};$(document).on("mousemove scroll",_.throttle((function(){o||t(),s()}),100))}));
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}})();!(function(){var e=(function(){function e(t,a){_classCallCheck(this,e),this.Wall=t,this.WallHelper=a,helpers.autoBind(this),this.requestOlderCheckinsThrottled=_.throttle((function(e){return t.requestOlderCheckins(e)}),1e3)}return _createClass(e,[{key:"sendDocumentHeight",value:function(){e.sendPostMessage("Wallsio.height",this.WallHelper.getWallHeight())}},{key:"initDomEvents",value:function(){var e=this;$(window).on("message",(function(t){var a=t.originalEvent.data;if(a)switch(a.method){case"Wallsio.requestOlderCheckins":var n=_.get(a.args,0);e.requestOlderCheckinsThrottled(n);break;case"Wallsio.getHeight":e.sendDocumentHeight.apply(e,a.args);break;case"Wallsio.setAutoFillEnabled":var s=_.get(a.args,0);e.Wall.setAutofillEnabled(s)}}))}}],[{key:"sendPostMessage",value:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];window!==parent&&parent.postMessage&&parent.postMessage({method:e,args:a},"*")}}]),e})();window.PostmessageApi=e})();
"use strict";Wall.themeParams.enableAspectRatioImages=!0,Wall.themeParams.defaultPostImageAspectRatio=1,Wall.themeParams.minPostImageAspectRatio=.75,Wall.themeParams.maxPostImageAspectRatio=2.76,Wall.methods.$createUser=function(e){var t=helpers.checkins.getShortName(e),a=helpers.checkins.getFullName(e),s=helpers.checkins.getCombinedName(e),m=t!==a,r=templates.user_name_parts({shortName:t,fullName:a,combinedName:s,hasSeparateNames:m});return $(templates.user({type:e.type,shortName:t,fullName:a,combinedName:s,nameParts:r,userId:e.external_user_id,userLink:e.external_user_link,image:e.external_image,externalCreatedTimestamp:e.external_created_timestamp,postId:e.post_id,postLink:e.post_link}))},Wall.methods.$createAd=function(e,t){var a=100/new helpers.Image(t).getAspectRatio(e,"post_image",Wall.themeParams,!0)+"%";return $(templates.ad({id:e.id,imagePaddingBottom:a,postId:e.post_id,postImage:e.post_image,postLink:e.post_link,externalCreatedTimestamp:Date.now(),weight:e.weight,bonus:e.bonus||0,type:e.type}))};
"use strict";!(function(){var e=function(e){var t=".checkin-"+e+" .checkin-message-wrapper",a=10*Math.random();helpers.Css.addRule(t,"animation-delay: "+a+"s")},t=function(e,t){var a=Wall.methods.$createUser(e);return t?a[0].outerHTML:a},a=function(a,i){var n,r,s,l,d,o=new helpers.Wall(i),h=a.post_image;d=a.truncated_html_comment;var c=null;if(!h&&!d)return null;if(a.tags&&(c=a.tags.replace(/#/g,"")),n=$(templates.container({id:a.id,type:a.type,tags:c,weight:a.weight,externalCreatedTimestamp:a.external_created_timestamp,userId:a.external_user_id,bonus:a.bonus||0,isLooped:a.isLooped})),(r=n.find(".checkin")).addClass(o.getRandomCheckinColorClass(a.id)),a.is_highlighted&&(r.append(templates.highlight_icon()),r.addClass("checkin-highlighted")),h&&r.addClass("image"),d&&r.addClass("message"),h){var p=new helpers.Video(i),m=helpers.Video.hasRealVideo(a),u=p.hasEmbeddedVideoSupport(a);!m&&u&&r.addClass("checkin-with-embedded-video"),s=$(templates.image({hasVideo:helpers.Video.hasRealVideo(a),id:a.id,image:h,message:d,postLink:a.post_link,showPlayButton:m||u}))}else s=$(templates.message({message:d}));return h&&d&&e(a.id),n=helpers.Wall.addImageAndMessageClasses(n,"wrapper",h,d),r=helpers.Wall.addImageAndMessageClasses(r,"checkin",h,d),l=t(a),r.append(s),r.append(l),helpers.Video.initVideo(a,r),n},i=function(e){var t=Wall.getSortedCheckinsData(),a=Wall.getCheckinData(e.data("id"));if(!a)return $();var i=t.filter((function(e){return 0!==$(".checkin-wrapper-"+e.id).length&&e.sortScore>a.sortScore})).last();if(!i)return $();var n=i.id;return $(".checkin-wrapper-"+n)},n=function(e,t){var a=i(t);a.length>0?a.after(t):e.prepend(t)};Wall.methods.getTilesLimit=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=120;return helpers.Wall.isIframe()&&(t=Math.ceil(.8*t)),helpers.Wall.isMobile()&&(t=Math.ceil(.5*t)),t},Wall.methods.domCreateCheckin=function(e,t){return"sponsored"===e.type?Wall.methods.$createAd(e,t):a(e,t)},Wall.methods.domPrependCheckins=function(e,t){t.each((function(){n(e,$(this))}))},Wall.methods.domReplaceCheckin=function(e,t,a,i){var r=t.closest(".checkin-wrapper"),s=Wall.methods.domCreateCheckin(a,i);if(!s)return!1;t.replaceWith(s.find(".checkin")),n(e,r.detach())},Wall.methods.getSupportedRankingMode=function(e){return e},Wall.methods.getNumberOfCheckinsToFillScreen=function(){var e=$(".socialwall_container"),t=$("<div>",{class:"checkin-wrapper"});e.append(t);var a=e.width(),i=t.outerWidth()/a,n=Math.round(1/i),r=$(window).height(),s=t.outerHeight(),l=s/r,d=Math.round(1/l);t.remove();var o=Wall.methods.getBottomRegionHeight(),h=n*(d+Math.ceil(o/s));return h<5?5:h>200?200:h},Wall.methods.getNumberOfInitialCheckins=function(){return Wall.methods.getNumberOfCheckinsToFillScreen()},Wall.methods.initTheme=function(e){}})();