window.templates=window.templates||{},window.templates.checkin_video=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="video-wrapper checkin-video-wrapper">\n  <video loop="loop" class="checkin-video">\n    <source src="'+__e(videoUrl)+'" type="video/mp4" />\n  </video>\n\n  <div class="video-mute-button"></div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates.highlight_icon=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<svg class="checkin-highlight-icon" x="0px" y="0px" width="41px" height="41px" viewBox="0 0 41 41">\n  <path class="checkin-highlight-icon-badge" d="M0,0v41l20.333-7L41,41V0H0z M26.988,28L20.5,25.104L14.011,28l0.89-6.766l-4.899-4.978l7.038-1.286L20.5,9\n  l3.46,5.971l7.038,1.286L26.1,21.234L26.988,28z"/>\n  <path class="checkin-highlight-icon-star" d="M20.5,9l3.46,5.971l7.038,1.286l-4.899,4.977L26.989,28\n  L20.5,25.104L14.011,28l0.89-6.766l-4.899-4.977l7.038-1.286L20.5,9"/>\n</svg>\n';return __p};
window.templates=window.templates||{},window.templates.message=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="checkin-message-wrapper">\n  <div class="checkin-message">\n    '+(null==(__t=message)?"":__t)+"\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates.user=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="checkin-user clearfix">\n  ',userLink?(__p+="\n\n    ",image&&(__p+='\n      <a href="'+(null==(__t=userLink)?"":__t)+'" class="checkin-user-image" target="_blank" style="background-image: url('+(null==(__t=image)?"":__t)+')">\n      </a>\n    '),__p+='\n\n    <div class="checkin-user-name" title="'+__e(combinedName)+'">\n      <a href="'+(null==(__t=userLink)?"":__t)+'" target="_blank">\n        '+(null==(__t=nameParts)?"":__t)+"\n      </a>\n    </div>\n\n  "):(__p+="\n\n    ",image&&(__p+='\n      <div class="checkin-user-image" style="background-image: url('+(null==(__t=image)?"":__t)+')">\n      </div>\n    '),__p+='\n\n    <div class="checkin-user-name" title="'+__e(combinedName)+'">\n      '+(null==(__t=nameParts)?"":__t)+"\n    </div>\n\n  "),__p+="\n\n  ",postLink?__p+='\n    <a href="'+(null==(__t=postLink)?"":__t)+'" class="checkin-timestamp" data-timestamp="'+(null==(__t=externalCreatedTimestamp)?"":__t)+'" target="_blank"></a>\n  ':__p+='\n    <span class="checkin-timestamp" data-timestamp="'+(null==(__t=externalCreatedTimestamp)?"":__t)+'"></span>\n  ',__p+='\n\n  <div class="checkin-type checkin-type-'+(null==(__t=type)?"":__t)+'" title="'+(null==(__t=helpers.getChannelName(type))?"":__t)+'" data-action="show-detail" >\n  </div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates.user_name_parts=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)hasSeparateNames?__p+='\n  <span class="checkin-user-name-part checkin-user-name-full">'+__e(fullName)+'</span>\n  <span class="checkin-user-name-part checkin-user-name-short">'+__e(shortName)+"</span>\n":__p+="\n  "+__e(combinedName)+"\n",__p+="\n";return __p};
window.templates=window.templates||{},window.templates["detail/container"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="detail-container" data-action="hide-detail">\n  <div class="detail-inner">\n    '+(null==(__t=detailContent)?"":__t)+'\n  </div>\n\n  <div class="detail-loading-indicator-wrapper">\n    <svg class="loading-indicator detail-loading-indicator">\n      <use xlink:href="#app-logo-svg"></use>\n    </svg>\n  </div>\n</div>\n\n<div class="detail-menu" data-action="hide-detail">\n  '+(null==(__t=detailMenuSharing)?"":__t)+'\n\n  <div class="detail-close" data-action="hide-detail"></div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates["detail/content"]=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="detail-content detail-content-'+(null==(__t=hasImage?"withimage":"withoutimage")?"":__t)+'">\n  '+(null==(__t=postImageElement)?"":__t)+'\n\n  <div class="detail-text-wrapper detail-text-wrapper-'+(null==(__t=network)?"":__t)+'">\n    <div class="detail-network-background detail-network-background-'+(null==(__t=network)?"":__t)+'"></div>\n\n    <div class="detail-text-inner">\n      <div class="detail-text-content">\n        '+(null==(__t=detailUserElement)?"":__t)+'\n\n        <div class="detail-message">\n          <div class="detail-message-inner">'+(null==(__t=message)?"":__t)+'</div>\n        </div>\n      </div>\n\n      <div class="detail-text-extra">\n        '+(null==(__t=detailSharingElement)?"":__t)+"\n      </div>\n    </div>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/menu_sharing"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="detail-menu-sharing">\n  <button type="button" class="detail-menu-sharing-expander" data-action="show-detail-menu-sharing">'+__e(helpers.translation.__("SHARE_POST"))+'</button>\n\n  <div class="detail-menu-sharing-content">\n    <a href="https://www.facebook.com/sharer/sharer.php?u='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-menu-sharing-button" data-action="share" data-network="facebook">\n      <i class="fa fa-facebook"></i>\n    </a>\n\n    <a href="https://twitter.com/intent/tweet?url='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-menu-sharing-button" data-action="share" data-network="twitter">\n      <i class="fa fa-twitter"></i>\n    </a>\n\n    <a href="#" class="detail-menu-sharing-button link-button" data-clipboard-text="'+(null==(__t=link)?"":__t)+'" title="'+__e(helpers.translation.__("SHARE_POST_LINK"))+'" data-action="detail-copy-link">\n      <i class="fa fa-link"></i>\n    </a>\n\n    <div class="detail-link-copied">\n      <span>'+__e(helpers.translation.__("COPIED_TO_CLIPBOARD"))+"<span>\n    </div>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/post_image"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)postImage&&(__p+='\n  <div\n    class="detail-image '+(null==(__t=postVideoElement?"detail-image-with-video":"")?"":__t)+'"\n    data-image="'+__e(postImage)+'"\n    data-aspect-ratio="'+(null==(__t=imageAspectRatio)?"":__t)+'"\n  >\n    ',postVideoElement?__p+="\n      "+(null==(__t=postVideoElement)?"":__t)+"\n    ":__p+='\n      <div class="detail-image-inner" style="background-image: url('+__e(postImage)+')">\n      </div>\n    ',__p+="\n\n    ",postLink&&(__p+='\n      <a href="'+__e(postLink)+'" target="_blank" class="detail-image-link"></a>\n    '),__p+="\n  </div>\n"),__p+="\n";return __p};
window.templates=window.templates||{},window.templates["detail/sharing"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<span class="detail-sharing-intro">\n  '+__e(helpers.translation.__("SHARE_POST"))+'\n</span>\n\n<div class="detail-sharing-buttons">\n  <a href="https://www.facebook.com/sharer/sharer.php?u='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-sharing-button" data-action="share" data-network="facebook">\n    <i class="fa fa-facebook"></i>\n  </a>\n\n  <a href="https://twitter.com/intent/tweet?url='+(null==(__t=encodeURIComponent(link))?"":__t)+"&text="+(null==(__t=encodeURIComponent(text))?"":__t)+"&via="+(null==(__t=twitterVia)?"":__t)+'" class="detail-sharing-button" data-action="share" data-network="twitter">\n    <i class="fa fa-twitter"></i>\n  </a>\n\n  <a href="https://plus.google.com/share?url='+(null==(__t=encodeURIComponent(link))?"":__t)+'" class="detail-sharing-button" data-action="share" data-network="googleplus">\n    <i class="fa fa-google-plus"></i>\n  </a>\n\n  <a href="#" class="detail-sharing-button link-button" data-clipboard-text="'+(null==(__t=link)?"":__t)+'" title="'+__e(helpers.translation.__("SHARE_POST_LINK"))+'" data-action="detail-copy-link">\n    <i class="fa fa-link"></i>\n  </a>\n\n  <div class="detail-link-copied">\n    <span>'+__e(helpers.translation.__("COPIED_TO_CLIPBOARD"))+"<span>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/user"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="detail-user">\n  <a href="'+__e(userLink)+'" class="detail-user-image" target="_blank" style="background-image: url('+__e(userImage)+')">\n\n  </a>\n\n  <div class="detail-user-info">\n    <div class="detail-user-name" title="'+__e(combinedName)+'">\n      <i class="detail-network-icon detail-network-icon-'+__e(network)+'"></i>\n      <a href="'+__e(userLink)+'" target="_blank">'+__e(userName)+'</a>\n    </div>\n\n    <a href="'+__e(postLink)+'" class="detail-timestamp" target="_blank">'+__e(humanTimeDiff)+"</a>\n  </div>\n</div>\n";return __p};
window.templates=window.templates||{},window.templates["detail/video"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)postVideo&&(__p+='\n  <div class="video-wrapper detail-video-wrapper">\n    <video loop="loop" class="detail-video" poster="'+__e(postImage)+'">\n      <source src="'+__e(postVideo)+'" type="video/mp4" />\n    </video>\n\n    <div class="video-play-button"></div>\n  </div>\n'),__p+="\n";return __p};
window.templates=window.templates||{},window.templates["embeds/vimeo_embed"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<iframe class="checkin-video-embed" src="https://player.vimeo.com/video/'+__e(token)+'?autoplay=1&loop=1&title=0&byline=0&portrait=0" frameborder="0" allowfullscreen></iframe>\n';return __p};
window.templates=window.templates||{},window.templates["embeds/youtube_embed"]=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)muteValue=mute?1:0,__p+='\n<iframe class="checkin-video-embed" src="https://www.youtube-nocookie.com/embed/'+__e(token)+"?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;mute="+(null==(__t=muteValue)?"":__t)+'" frameborder="0" allowfullscreen></iframe>\n';return __p};
window.templates=window.templates||{},window.templates.container=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="extra-wrapper">\n  <div class="checkin-wrapper checkin-wrapper-'+(null==(__t=id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'">\n    <div class="checkin checkin-'+(null==(__t=id)?"":__t)+'" data-id="'+(null==(__t=id)?"":__t)+'" data-weight="'+(null==(__t=weight)?"":__t)+'" data-timestamp="'+(null==(__t=externalCreatedTimestamp)?"":__t)+'" data-bonus="'+(null==(__t=bonus)?"":__t)+'" data-is-looped="'+(null==(__t=isLooped)?"":__t)+'" data-tags="'+__e(tags)+'" data-type="'+(null==(__t=type)?"":__t)+'" data-user-id="'+(null==(__t=userId)?"":__t)+'">\n    </div>\n  </div>\n</div>\n';return __p};
window.templates=window.templates||{},window.templates.image=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="checkin-image-wrapper checkin-image-preview-holder">\n  ',postLink?__p+='\n  <a href="'+__e(postLink)+'" target="_blank" class="checkin-image" data-action="show-detail" style="background-image:url('+__e(image)+"); padding-bottom: "+(null==(__t=imagePaddingBottom)?"":__t)+'"></a>\n  ':__p+='\n  <div class="checkin-image" style="background-image:url('+__e(image)+"); padding-bottom: "+(null==(__t=imagePaddingBottom)?"":__t)+'"></div>\n  ',__p+="\n</div>\n\n",message&&(__p+='\n<div class="checkin-message">\n  '+(null==(__t=message)?"":__t)+"\n</div>\n"),__p+="\n";return __p};
"use strict";window.helpers=(function(){var e=function(e){return"[data-action~='"+e+"']"},t=function(e,t){var r="",n=e;do{var u=n%t;n=Math.floor(n/t),r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/".charAt(u)+r}while(0!==n);return r},r=function(e,t){var r=e.split("");return _.reduce(r,(function(e,r){return e*t+"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/".indexOf(r)}),0)},n=function(e){if(!e)return 0;var t=0,r=(e=e.toString()).length;if(0===r)return t;for(var n=0;n<r;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return Math.abs(t)},u=function(e,t,r){if(r<=t)return e;var n=(e.length/r+1)/2,u=Math.round(t*n);return htmlTruncate(e,u,{ellipsis:"â€¦"})},a=function(e){return e&&"object"===$.type(e)&&e.name?e.name:e&&"object"===$.type(e)&&e.title?e.title:e&&"object"===$.type(e)&&e.username?e.username:e&&"object"===$.type(e)&&e.id?e.id:$.isNumeric(e)||"string"===$.type(e)?""+e:"Facebook Page"},o=function(e){return"@"+e.username},i=function(e){return e.name||o(e)},c=function(e){return e.name},f=function(e){return e.name},s=function(e){return e.name},l=function(e){var t=e.external_name;return{username:t,name:e.external_fullname||t}},m=function(e){var t=l(e);return _.includes(["twitter","instagram"],e.type)?o(t):t.username},h=function(e){var t=l(e);switch(e.type){case"twitter":case"instagram":return i(t);case"facebook":return a(t);case"googleplus":return c(t);case"youtube":return f(t);case"pinterest":return s(t)}return t.name},d=function(e){switch(e){case"googleplus":return"Google+";case"foursquare":return"Foursquare / Swarm";case"youtube":return"YouTube";case"rss":return"RSS";case"ads":return"Advertising";case"vkontakte":return"VKontakte";default:return (function(e){return e.charAt(0).toUpperCase()+e.slice(1)})(e)}},g=function(e,t){return t||("facebook"===e?"page":"profile")};return{$actionElement:function(t){return $(e(t))},actionSelector:e,autoBind:function(e){var t=!0,r=!1,n=void 0;try{for(var u,a=Object.getOwnPropertyNames(e.constructor.prototype)[Symbol.iterator]();!(t=(u=a.next()).done);t=!0){var o=u.value,i=e[o];"constructor"!==o&&"function"==typeof i&&(e[o]=i.bind(e))}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return e},getChannelName:d,getSourceName:function(e,t){return d(e)+" "+g(e,t)},getUnixTimestamp:function(){return Math.floor(Date.now()/1e3)},checkins:{getShortName:m,getFullName:h,getCombinedName:function(e){var t=l(e),r=m(e),n=h(e);return n?r?t.name===t.username?r:r+" ("+n+")":n:r}},jQuery:{stringify:function(e){return $("<div>").append(e.clone()).html()}},string:{hash:n},integer:{ceilTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.ceil(e/t)*t},getRandomSeededInt:function(e,t,r){r+=1,e=n(e);var u=(e=1e4*Math.sin(e))-Math.floor(e);return Math.floor(u*(r-t))+t}},slug:{fromId:function(e){return t(e,62)},toId:function(e){return r(e,62)}},truncateTransformedTextPrecise:function(e,t,r){for(var n=t,a=0;;){var o=u(e,n,r);if($("<div>").html(o).text().length<=t)return o;if(n=Math.ceil(.9*n),++a>=50)return o}}}})();
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}})();!(function(){var e=(function(){function e(){_classCallCheck(this,e),this.isCancelled=!1,this.scheduledActions=new Immutable.List,helpers.autoBind(this)}return _createClass(e,[{key:"do",value:function(e){return this.scheduledActions=this.scheduledActions.push(e),this}},{key:"wait",value:function(n){return this.do((function(){return new Promise(function(t){var i=e.now();requestAnimationFrame((function r(){if(e.now()>i+n)return t();requestAnimationFrame(r)}))})})),this}},{key:"run",value:function(){var e=this,n=Promise.resolve();return this.scheduledActions.forEach((function(t){n=n.then((function(){if(!e.isCancelled)return t()}))})),this.scheduledActions=this.scheduledActions.clear(),n}},{key:"cancel",value:function(){this.scheduledActions=this.scheduledActions.clear(),this.isCancelled=!0}}],[{key:"now",value:function(){return window.performance&&window.performance.now?window.performance.now():Date.now()}},{key:"callAfter",value:function(n,t){return(new e).wait(t).do((function(){return n()})).run()}}]),e})();window.helpers.Animation=e})();
"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function n(n,t){for(var a=0;a<t.length;a++){var e=t[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,a,e){return a&&n(t.prototype,a),e&&n(t,e),t}})();!(function(){var n=function(n,t,a){var e=n,r=a,s=t,i=e/2-r,l=Math.atan(s/i),u=Math.asin(r*Math.sin(l)/e);return(Math.PI-l-u)*(180/Math.PI)},t=function(n,t,a){var e=t/n*2,r=Math.atan(e),s=Math.sin(r),i=t/s,l=a,u=l*l+i*i-2*l*i*Math.cos(r),c=i*s/Math.sqrt(u),o=Math.asin(c),h=Math.PI-o,f=l*Math.sin(h)/n,M=Math.asin(f),d=(Math.PI-h-M)*(180/Math.PI);return d<0?0:d},a=(function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"addRule",value:function(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,e=$("#dynamic-css");0===e.length&&(e=$("<style>").attr("id","dynamic-css").appendTo("body"));var r=e[0].sheet;a<0&&(a=_.get(r,"cssRules.length",0)),"addRule"in r?r.addRule(n,t,a):"insertRule"in r&&r.insertRule(n+"{"+t+"}",a)}},{key:"getTransformAngle",value:function(a,e,r){return r<a/2?n(a,e,r):t(a,e,r)}}]),a})();window.helpers.Css=a})();
"use strict";function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function n(n,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(a,e,i){return e&&n(a.prototype,e),i&&n(a,i),a}})();!(function(){var n=(function(){function n(a){_classCallCheck(this,n),this.wallOptions=a}return _createClass(n,null,[{key:"trackGaTiming",value:function(n,a,e){if(window.ga&&Date.now){WallTimings[n]=Date.now();var i=WallTimings[n]-WallTimings.pageload;i>6e4||ga("send",{hitType:"timing",timingCategory:a,timingVar:e,timingValue:i})}}}]),n})();window.helpers.Tracking=n})();
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}})();!(function(){var e=(function(){function e(n){_classCallCheck(this,e),this.wallOptions=n}return _createClass(e,null,[{key:"build",value:function(e,n){var t=_.get(templates,e);return t?t(n):""}}]),e})();window.helpers.Templates=e})();
"use strict";window.helpers.translation=(function(){var r=function(r){var t=WallMessages.items[r];if(t)return t;var a=WallMessages.plurals[r];if(a){var n=WallMessages.items[a];if(n)return n}return[r]},t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r(t),e=n[a];return e||n[0]},a=function(r,t){if(0===t.length)return r;for(var a=/\%(s|d)/,n=1;a.test(r);n++)r=r.replace(a,"%"+n+"$s");var e={},i=[];t.forEach((function(r,t){var a="\\%("+(t+1)+")\\$s";e["%"+(t+1)+"$s"]=r,i.push(a)}));var l=new RegExp(i.join("|"),"g");return r.replace(l,(function(r){return e[r]}))},n=function(r){for(var n=arguments.length,e=Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];var l=t(r);return a(l,e)};return{translateText:function(){var r=function(r,t){var a=t.split("=");if(!(a.length<2)){var e=a[0],i=a[1];e&&i&&r.attr(e,n(i))}};$("[data-translate]").each((function(){var r=$(this),t=r.data("translate");r.html(n(t))})),$("[data-translate-attribute]").each((function(){var t=$(this),a=t.data("translate-attribute").split("|"),n=!0,e=!1,i=void 0;try{for(var l,s=a[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var u=l.value;r(t,u)}}catch(r){e=!0,i=r}finally{try{!n&&s.return&&s.return()}finally{if(e)throw i}}}))},__:n,__n:function(r,n,e){for(var i=arguments.length,l=Array(i>3?i-3:0),s=3;s<i;s++)l[s-3]=arguments[s];var u=WallMessages.pluralFunction(e),o=t(u>0?n:r,u);return a(o,l)}}})();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}})();!(function(){var e=$("body"),t=$(window),n=helpers.translation.__,i=helpers.translation.__n,o=helpers.Animation,a=(function(){function a(e){_classCallCheck(this,a),this.wallOptions=e,this.disconnectTimeout=null,this.reconnectTimeout=null,this.serverStartedAt=null,helpers.autoBind(this)}return _createClass(a,[{key:"prepareEntities",value:function(e){if(!e.entities)return e;var t=void 0;try{t=JSON.parse(e.entities)}catch(e){}return t||(t={}),e.entities=t,e}},{key:"getRandomCheckinColorClass",value:function(e){var t=this.wallOptions.colorCount;return"checkin-color-"+helpers.integer.getRandomSeededInt(e,1,t)}},{key:"initUser",value:function(){betterFetch.json(this.wallOptions.webAppPath+"/walls/user_status.json",{wall_id:this.wallOptions.wallId}).then((function(e){$("html").toggleClass("has-wall-access",e.canEditWall).toggleClass("has-moderation-access",e.canModerateWall).toggleClass("is-logged-in",e.isLoggedIn).toggleClass("is-not-logged-in",!e.isLoggedIn),e.overlayBar&&a.showNotificationBar(e.overlayBar)})).catch((function(e){})).then((function(){$("html").removeClass("user-status-unknown")}))}},{key:"generateInstructions",value:function(){var e=$(".post_instructions"),t=this.wallOptions.postInstructions,i=$("<ul>"),o=t.basic||[],a=t.networks||[],l=!0,s=!1,r=void 0;try{for(var c,u=o[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var d=c.value;if(d){var h=$("<li>").text(d);i.append(h)}}}catch(e){s=!0,r=e}finally{try{!l&&u.return&&u.return()}finally{if(s)throw r}}var f=!0,v=!1,p=void 0;try{for(var m,w=a[Symbol.iterator]();!(f=(m=w.next()).done);f=!0){var k=m.value,g=$("<li>").html(n(k.message,k.tags));i.append(g)}}catch(e){v=!0,p=e}finally{try{!f&&w.return&&w.return()}finally{if(v)throw p}}e.addClass("post-instructions-hidden"),e.html(i.contents())}},{key:"getWallSocket",value:function(){var e=this,t=$.param({wallId:this.wallOptions.wallId,client:"wallsio-frontend-2017_8_24",initialCheckins:this.wallOptions.initialCheckins,cookieSupport:a.hasCookieSupport()?1:0,network:this.wallOptions.network}),n=this.wallOptions.nodeUrl+"?"+t,i=io(n,{reconnectionDelay:2e3,reconnectionDelayMax:15e3});return i.on("reload wall",(function(){a.reloadWall(i)})),i.on("wallping",(function(t){e.serverStartedAt?e.serverStartedAt!==t.serverStartedAt&&a.reloadWall(i):e.serverStartedAt=t.serverStartedAt})),i}},{key:"initDynamicDisconnect",value:function(e){var t=this;$(document).on("visibilitychange",(function(){"visible"===document.visibilityState?(clearTimeout(t.disconnectTimeout),e.connected||(t.reconnectTimeout=setTimeout((function(){e.connect(),$("html").removeClass("socket-disconnected")}),1500))):(clearTimeout(t.reconnectTimeout),e.connected&&(t.disconnectTimeout=setTimeout((function(){e.disconnect(),$("html").addClass("socket-disconnected")}),48e4)))}))}},{key:"loadCachedCheckins",value:function(){return betterFetch.json(this.wallOptions.webAppPath+"/get_cached_checkins.json",{wallId:this.wallOptions.wallId}).then((function(e){return e.cachedCheckins}))}}],[{key:"reloadWall",value:function(e){e.disconnect(),$(document).off("visibilitychange");var t=Math.floor(500+1e4*Math.random());setTimeout((function(){location.reload()}),t)}},{key:"humanTimeDiff",value:function(e){if((e=Math.floor(e/1e3))<5)return n("THIS_MOMENT");if(e<60){var t=Math.floor(e);return i("A_SECOND_AGO","%s_SECONDS_AGO",t,t)}if(e<3600){var o=Math.floor(e/60);return i("A_MINUTE_AGO","%s_MINUTES_AGO",o,o)}if(e<86400){var a=Math.floor(e/3600);return i("AN_HOUR_AGO","%s_HOURS_AGO",a,a)}if(e<2592e3){var l=Math.floor(e/86400);return i("A_DAY_AGO","%s_DAYS_AGO",l,l)}var s=Math.floor(e/604800);return i("A_WEEK_AGO","%s_WEEKS_AGO",s,s)}},{key:"forceSSL",value:function(e){return _.isString(e)?e.replace(/^http:/i,"https:"):e}},{key:"showNotificationBar",value:function(e){var t=e.markup,n=e.autoshowhideInterval,i=e.displayTimeout,o=void 0===i?4e3:i,a=$(t);$(".wall-notifications").append(a),setTimeout((function(){a.addClass("wall-notification-visible"),n&&setInterval((function(){a.toggleClass("wall-notification-visible")}),n)}),o)}},{key:"loopInstructions",value:function(){var e=$(".post_instructions"),t=e.find("li"),n=e.find("li.is-visible");if(t.length){var i=n.next();i.length||(i=e.find("li").first());var l=i.text().length,s=Math.round(l/2),r=e.css("transition-timing-function").replace(/steps\(\d+/gi,"steps("+s);e.css("transition-timing-function",r),(new o).do((function(){e.addClass("post-instructions-hidden")})).wait(450).do((function(){n.removeClass("is-visible"),i.addClass("is-visible")})).wait(500).do((function(){e.removeClass("post-instructions-hidden")})).wait(7500).do(a.loopInstructions).run()}}},{key:"hasCookieSupport",value:function(){return!!_.isString(document.cookie)&&(!!navigator.cookieEnabled&&(document.cookie="cookieSupport=1",document.cookie.indexOf("cookieSupport")>=0))}},{key:"initClipboard",value:function(){new Clipboard("[data-clipboard-text]"),$("[data-clipboard-text]").on("click",(function(e){e.preventDefault();var t=$(this).next(".copied");t.addClass("copied-visible"),setTimeout((function(){return t.removeClass("copied-visible")}),3e3)}))}},{key:"initFilter",value:function(t,n){var i=$(".show-filter"),o=$(".filter-menu-reset"),a=$(".filter-menu-network");a.each((function(){var e=$(this);e.on("click",(function(){e.hasClass("filter-menu-network-selected")?(e.removeClass("filter-menu-network-selected"),n()):(a.removeClass("filter-menu-network-selected"),e.addClass("filter-menu-network-selected"),t(e.data("network")))}))})),i.on("click",(function(){e.toggleClass("show-filter-menu")})),o.on("click",(function(){a.removeClass("filter-menu-network-selected"),n()})),a.add(o).on("click",(function(){0===$(this).closest(".wall-toolbar").length&&e.removeClass("show-filter-menu"),window.scrollTo(0,0)}))}},{key:"addImageAndMessageClasses",value:function(e,t,n,i){var o=[],a=void 0;return a="wrapper"===t?"checkin-wrapper-":"checkin-",n&&i?o=[a+"with-image",a+"with-message",a+"with-image-and-message"]:n?o=[a+"with-image",a+"without-message"]:i&&(o=[a+"with-message",a+"without-image"]),e.addClass(o.join(" ")),e}},{key:"isAppScrollable",value:function(){return $("body").hasClass("scrollable")}},{key:"isIframe",value:function(){try{return window.self!==window.top}catch(e){return!0}}},{key:"isMobile",value:function(){return $("html").hasClass("mobile")}},{key:"isAutoheight",value:function(){return a.isIframe()&&$("html").hasClass("autoheight")}},{key:"isElementVisible",value:function(e){var t=$(e);return!t.is(":hidden")&&("hidden"!==t.css("visibility")&&(0!==parseInt(t.css("opacity"),10)&&(0===t.parent().length||t.parent()[0]===document||a.isElementVisible(t.parent()))))}},{key:"isInViewport",value:function(e){if(!a.isElementVisible(e))return!1;var n=e.getBoundingClientRect();return n.bottom>=0&&n.right>=0&&n.top<=t.height()&&n.left<=t.width()}},{key:"isMiddleInViewport",value:function(e){if(!a.isElementVisible(e))return!1;var n=e.getBoundingClientRect(),i=n.top+n.height/2,o=n.left+n.width/2;return i>=0&&i<=t.height()&&o>=0&&o<=t.width()}},{key:"getWallHeight",value:function(){return $("html")[0].scrollHeight}},{key:"hideWallInfo",value:function(){$("html").addClass("hide-wall-info")}},{key:"showWallInfo",value:function(e){$("html").removeClass("hide-wall-info"),$(".wall-info").text(e)}},{key:"updateTimestamps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;(t?$(".checkin-"+t).find(".checkin-timestamp"):$(".checkin-timestamp")).each((function(){var t=$(this).attr("data-timestamp"),i=void 0;t&&(i=(e||Date.now())-t,$(this).text(n.humanTimeDiff(i)))}))}},{key:"getWindowMode",value:function(){return t.width()>t.height()?"landscape":"portrait"}},{key:"isLandscape",value:function(){return"landscape"===a.getWindowMode()}},{key:"isPortrait",value:function(){return"portrait"===a.getWindowMode()}}]),a})();window.helpers.Wall=a})();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=(function(){function e(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){i=!0,n=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw n}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),_createClass=(function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}})();!(function(){var e=["post_image","external_image"],t=["post_image"],a=["post_image","external_image"],r=(function(){function r(e){_classCallCheck(this,r),this.wallOptions=e,helpers.autoBind(this)}return _createClass(r,[{key:"makeUrlAbsolute",value:function(e){return r.isAbsoluteUrl(e)?e:this.wallOptions.webAppPath+e}},{key:"getProxyHost",value:function(e){var t=this.wallOptions.proxyHosts;if(!_.isArray(t))return null;var a=t.length;return t[helpers.string.hash(e)%a]}},{key:"getProxyUrl",value:function(e,t,a){var i=this.getProxyHost(e);if(!i||!r.isAbsoluteUrl(e))return e;var n={src:e,w:this.wallOptions.proxyImageWidth,h:this.wallOptions.proxyImageHeight,q:this.wallOptions.proxyImageQuality,nu:1,salt:this.wallOptions.proxySalt};return t&&(n.key=t),this.wallOptions.proxyNoCache&&(n.nc=1),_.isPlainObject(a)&&(n=_.assign(n,a)),_.get(window,"devicePixelRatio",1)>=1.5&&(n.w&&(n.w=2*n.w),n.h&&(n.h=2*n.h)),e=i+"?"+$.param(n)}},{key:"proxyImage",value:function(e,t,a){return e=this.makeUrlAbsolute(e),e=this.getProxyUrl(e,t,a),e=helpers.Wall.forceSSL(e)}},{key:"prepareImages",value:function(a,i){var n=this;return _.each(e,(function(e){if(a[e]){var t=void 0,r=e+"_key",o=e+"_original";a[o]?a[e]=a[o]:a[o]=a[e],t="external_image"===e?_.assign({},i,{w:n.wallOptions.proxyProfileImageWidth,h:n.wallOptions.proxyProfileImageHeight}):i,a[e]=n.proxyImage(a[e],a[r],t)}})),_.each(t,(function(e){a=r.addPreviewImage(a,e)})),a.post_video&&(a.post_video=helpers.Wall.forceSSL(a.post_video)),a}},{key:"getAspectRatio",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e[t+"_aspect_ratio"];return i&&!1!==a.enableAspectRatioImages?r?i:i<a.minPostImageAspectRatio?a.minPostImageAspectRatio:i>a.maxPostImageAspectRatio?a.maxPostImageAspectRatio:i:a.defaultPostImageAspectRatio}}],[{key:"buildBase64Image",value:function(e){var t="data:image/jpg;base64,";if(e.indexOf("~")>-1){var a=e.split("~"),r=_slicedToArray(a,2);return t+"/9j/4AAQSkZJRgABAQEAYABgAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gNjAK/9sAQwANCQoLCggNCwoLDg4NDxMgFRMSEhMnHB4XIC4pMTAuKS0sMzpKPjM2RjcsLUBXQUZMTlJTUjI+WmFaUGBKUVJP/9sAQwEODg4TERMmFRUmTzUtNU9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09P/8AAEQgA"+r[0]+"AwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A"+r[1]}return t+e}},{key:"preloadImage",value:function(e){if(e){var t=new Image;try{t.src=e}catch(e){}}}},{key:"isAbsoluteUrl",value:function(e){return/^\w+:\/\//.test(e)}},{key:"addPreviewImage",value:function(e,t){var a=t+"_preview";if(e[a]){var i=".checkin-"+e.id+" .checkin-image-preview-holder",n=r.buildBase64Image(e[a]);helpers.Css.addRule(i,'background-image:url("'+n+'")')}return e}},{key:"preloadImages",value:function(e){_.each(a,(function(t){e[t]&&r.preloadImage(e[t])}))}},{key:"getTwoDominantColors",value:function(e){var t=e.post_image_dominant_colors;if(!t)return null;var a=t.split(",");return a.length<2?null:a.slice(0,2)}}]),r})();helpers.Image=r})();
"use strict";window.helpers.map={getMapOptions:function(o,t){var n={backgroundColor:"#ccc",center:new o.maps.LatLng(48,7),disableDefaultUI:!0,fullscreenControl:!1,mapTypeControl:!1,maxZoom:10,minZoom:4,scaleControl:!1,streetViewControl:!1,rotateControl:!1,zoom:5,zoomControl:!0,zoomControlOptions:{position:o.maps.ControlPosition.TOP_RIGHT}};return $.extend({},n,t)}};
"use strict";helpers.sharing=(function(){var n=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=555,r=400;return"twitter"===t&&(r=260),"googleplus"===t&&(e=400),window.open(n,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+e+",height="+r),!1};return{initSharingLinks:function(){$(document).on("click",helpers.actionSelector("share"),(function(t){t.preventDefault();var e=$(this);n(e.attr("href"),e.attr("data-network"))}))},openSharingWindow:n}})();
"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(i,t,o){return t&&e(i.prototype,t),o&&e(i,o),i}})();!(function(){var e=(function(){function e(i,t,o){_classCallCheck(this,e),this.isVideoAutochangeActive=!0,this.changeVideoTimeout=null,this.networksWithVideoEmbeds=i.networksWithVideoEmbeds,this.WallHelper=t,this.TemplatesHelper=o,helpers.autoBind(this)}return _createClass(e,[{key:"hasEmbeddedVideoSupport",value:function(e){return _.includes(this.networksWithVideoEmbeds,e.type)}},{key:"getVisibleVideoCheckins",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,i=$(".socialwall_container").find(".checkin"),t=_.chain(i).filter(this.WallHelper.isMiddleInViewport).filter((function(e){return!!$(e).data("video-url")})).shuffle().slice(0,e).value();return $(t)}},{key:"displayVideo",value:function(i){if(!i.hasClass("checkin-with-video")){i.addClass("checkin-with-video");var t=i.data("video-url"),o=i.find(".checkin-image"),n=i.find(".checkin-image-inner"),s=$(this.TemplatesHelper.build("checkin_video",{videoUrl:t}));n.length>0?s.prependTo(n):s.prependTo(o);var a=s.find("video"),l=0;void 0===Modernizr.videoautoplay&&(l=100),setTimeout((function(){Modernizr.videoautoplay&&e.play(a),e.mute(a)}),l)}}},{key:"displayNewVideos",value:function(i){var t=this;e.removeAllOtherVideos(i),i.each((function(e,i){t.displayVideo($(i))}))}},{key:"changeVideos",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.changeVideoTimeout),this.changeVideoTimeout=setTimeout((function(){if(e.isVideoAutochangeActive)if(Modernizr.videoautoplay){var i=e.getVisibleVideoCheckins(3);0===i.length?e.changeVideos(1e3):(e.displayNewVideos(i),e.changeVideos(15e3))}else{var t=e.getVisibleVideoCheckins();e.displayNewVideos(t),e.changeVideos(400)}}),i)}},{key:"setVideoAutochangeActive",value:function(i){this.isVideoAutochangeActive=i,!1===i?e.removeAllVideos():this.changeVideos(0)}},{key:"initChangeVideoOnScrollListener",value:function(){var e=this,i=$(window),t=i.scrollTop();i.on("scroll",_.throttle((function(){var o=i.scrollTop(),n=i.height();Math.abs(o-t)<n/2||(e.changeVideos(),t=i.scrollTop())}),300))}},{key:"initEventListeners",value:function(){if(e.isVideoSupportedByBrowser()){var i=$(".socialwall_container, .detail-mount-point");i.on("click",".video-mute-button",(function(){var i=$(this).closest(".video-wrapper"),t=i.find("video");return i.hasClass("video-muted")?(e.unmute(t),e.muteAllOtherVideos(t)):e.mute(t),!1})),i.on("click",".video-play-button",(function(){var i=$(this).closest(".checkin-image-wrapper").find(".checkin-video");return!i.length||(e.play(i),!1)})),this.initChangeVideoOnScrollListener()}}},{key:"init",value:function(){this.initEventListeners(),this.changeVideos(2e3)}}],[{key:"hasRealVideo",value:function(e){return!!e.post_video}},{key:"setPlayClasses",value:function(e){e.closest(".video-wrapper").addClass("video-playing"),e.closest(".checkin").addClass("checkin-with-video-playing")}},{key:"setPauseClasses",value:function(e){e.closest(".video-wrapper").removeClass("video-playing"),e.closest(".checkin").removeClass("checkin-with-video-playing")}},{key:"play",value:function(i){var t=$(i).eq(0),o=(i=t.get(0)).play();o&&o.then?o.then((function(){e.setPlayClasses(t)})):e.setPlayClasses(t)}},{key:"pause",value:function(i){var t=$(i).eq(0);(i=t.get(0)).pause(),e.setPauseClasses(t)}},{key:"mute",value:function(e){var i=$(e).eq(0);(e=i.get(0)).muted=!0,i.closest(".video-wrapper").addClass("video-muted")}},{key:"unmute",value:function(e){var i=$(e).eq(0);(e=i.get(0)).muted=!1,i.closest(".video-wrapper").removeClass("video-muted")}},{key:"muteVimeoEmbed",value:function(e){var i=e.find(".checkin-video-embed");0!==i.length&&"vimeo"===e.data("type")&&i.get(0).contentWindow.postMessage(JSON.stringify({method:"setVolume",value:0}),"*")}},{key:"removeVideoClasses",value:function(e){var i=$(e).eq(0).closest(".video-wrapper");i.removeClass("video-muted video-playing"),i.closest(".checkin").removeClass("checkin-with-video checkin-with-video-playing")}},{key:"muteAllOtherVideos",value:function(i){var t=i.get(0);$(".checkin-video").each((function(i,o){o!==t&&e.mute(o)}))}},{key:"destroyVideo",value:function(i){var t=$(i).eq(0);(i=t.get(0))&&(e.pause(i),setTimeout((function(){e.removeVideoClasses(i),t.closest(".video-wrapper").remove()}),0))}},{key:"removeAllOtherVideos",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=$(".socialwall_container").find(".checkin-with-video");i&&i.length&&(t=t.filter((function(e,t){return!_.includes(i.toArray(),t)}))),t.removeClass("checkin-with-video"),t.each((function(i,t){e.destroyVideo($(t).find(".checkin-video"))}))}},{key:"removeAllVideos",value:function(){e.removeAllOtherVideos(null)}},{key:"initVideo",value:function(e,i){var t=e.post_video;t&&i.attr("data-video-url",t)}},{key:"isVideoSupportedByBrowser",value:function(){return"play"in document.createElement("video")}}]),e})();window.helpers.Video=e})();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}})();!(function(){var e=(function(){function e(t,n){_classCallCheck(this,e),this.wallOptions=t,this.wallState=n,this.bottomAddedCheckinsCounter=1,this.topAddedCheckinsCounter=1,helpers.autoBind(this)}return _createClass(e,[{key:"isNewAdNeeded",value:function(){var e=this.wallState.getSortedCheckinsData(),t=this.wallOptions.adsFrequency,n=Math.ceil(.15*t);return t+=_.random(-n,n),this.wallState.checkinsDataSize<t&&!e.some((function(e){return"sponsored"===e.type}))||!e.slice(0,t).some((function(e){return"sponsored"===e.type}))}},{key:"createCheckinDataFromAd",value:function(e){var t={};return t.id=e.id+"-"+Date.now(),t.post_id=e.id,t.post_image=e.image,t.post_image_aspect_ratio=e.image_aspect_ratio,t.post_image_key=e.image_key,t.post_image_dominant_colors=e.image_dominant_colors,t.post_link=e.link,t.type="sponsored",t=new helpers.Image(this.wallOptions).prepareImages(t,{q:95}),helpers.Image.preloadImages(t),t=this.prepareRankingData(t,"top"),t=this.makeCheckinTopRanked(t,this.wallState)}},{key:"getSortField",value:function(){return{weight:"weight",time:"external_created_timestamp",addOrder:"addOrder"}[this.wallOptions.clientRankingMode]}},{key:"addSortScoreToCheckin",value:function(e){var t=this.getSortField(),n=this.wallOptions.clientRankingMode,a=["weight","time"];if(!t)return e.sortScore=0,e;var i=e[t],r=e.bonus||0;return _.includes(a,n)&&(i+=r),e.sortScore=i,e}},{key:"makeCheckinTopRanked",value:function(e){var t=this.wallState.getSortedCheckinsData().first(),n=void 0,a=void 0,i=void 0;return t&&("weight"===this.wallOptions.clientRankingMode?(a=t.weight+t.bonus,i=e.weight):"time"===this.wallOptions.clientRankingMode?(a=t.external_created_timestamp+t.bonus,i=e.external_created_timestamp):"addOrder"===this.wallOptions.clientRankingMode&&(a=t.addOrder+t.bonus,i=e.addOrder),n=a-i+1,n=Math.max(n,0),e.bonus=n),e=this.addSortScoreToCheckin(e)}},{key:"prepareRankingData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.bonus=e.bonus||0,e.weight=e.weight||0,e.external_created_timestamp=e.external_created_timestamp||0,"top"===t?(e.addOrder=this.topAddedCheckinsCounter,this.topAddedCheckinsCounter++):"bottom"===t?(e.addOrder=-1*this.bottomAddedCheckinsCounter,this.bottomAddedCheckinsCounter++):n&&n.addOrder&&(e.addOrder=n.addOrder),e=this.addSortScoreToCheckin(e)}}],[{key:"compare",value:function(e,t){var n=[],a=_.intersection(_.keys(e),_.keys(t));return _.each(a,(function(a){_.isEqual(e[a],t[a])||n.push(a)})),n}},{key:"prepareComment",value:function(e,t){if(!e.html_comment)return e;var n=e.comment,a=e.html_comment,i=t,r=n.length;return a=helpers.truncateTransformedTextPrecise(a,i,r),e.truncated_html_comment=a,e}}]),e})();window.helpers.Checkins=e})();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}})();!(function(){var t=(function(){function t(e,i,a){_classCallCheck(this,t),this._stack=Immutable.List(),this._checkinsData=Immutable.Map(),this._sortedCheckinsData=Immutable.List(),this._newCheckinSortScoreThreshold=-1/0,this.wallOptions=e,this.isAppScrollable=i,this.getTilesLimit=a,helpers.autoBind(this)}return _createClass(t,[{key:"addToStack",value:function(t){this._stack=this._stack.push(t)}},{key:"shiftStack",value:function(){var t=this._stack.first();return this._stack=this._stack.shift(),t}},{key:"filterStack",value:function(t){this._stack=this._stack.filter(t)}},{key:"truncateStack",value:function(t){this._stack=this._stack.takeLast(t)}},{key:"truncateCheckinData",value:function(t){var e=this.getSortedCheckinsData().slice(t);if(0!==e.size){var i=e.map((function(t){return t.id}));this.removeCheckinData(i.toArray())}}},{key:"isStackEmpty",value:function(){return 0===this.stackSize}},{key:"isCheckinsDataEmpty",value:function(){return 0===this.checkinsDataSize}},{key:"getCheckinData",value:function(e){e=t.normalizeCheckinId(e);return this._checkinsData.get(e,null)}},{key:"hasCheckin",value:function(e){return e=t.normalizeCheckinId(e),this._checkinsData.has(e)}},{key:"setCheckinData",value:function(e,i){e=t.normalizeCheckinId(e),this._checkinsData=this._checkinsData.set(e,i),this.updateSortedCheckinsData()}},{key:"removeCheckinData",value:function(e){_.isArray(e)||(e=[e]),e=_.map(e,t.normalizeCheckinId),this._checkinsData=this._checkinsData.deleteAll(e),this.updateSortedCheckinsData()}},{key:"getAllCheckinsData",value:function(){return this._checkinsData}},{key:"getSortedCheckinsData",value:function(){return this._sortedCheckinsData}},{key:"getCheckinIds",value:function(){return this._checkinsData.keySeq().toList()}},{key:"updateSortedCheckinsData",value:function(){var t=this._checkinsData.toList(),e=!0,i=!1,a=void 0;try{for(var n,s=this.checkinsDataSortFunctions[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var r=n.value;t=t.sortBy(r)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}this._sortedCheckinsData=t,this.updateNewCheckinSortScoreThreshold()}},{key:"updateNewCheckinSortScoreThreshold",value:function(){if(!this.isAppScrollable)return!1;var t=this.getTilesLimit(this.wallOptions,!0),e=Math.round(t/2);if(this._sortedCheckinsData.size<e)return!1;var i=e-1,a=this._sortedCheckinsData.get(i);if(!a||!a.sortScore)return!1;this._newCheckinSortScoreThreshold=a.sortScore}},{key:"stackSize",get:function(){return this._stack.size}},{key:"checkinsDataSize",get:function(){return this._sortedCheckinsData.size}},{key:"newCheckinSortScoreThreshold",get:function(){return this._newCheckinSortScoreThreshold}},{key:"checkinsDataSortFunctions",get:function(){var t=[];return t.push((function(t){return-1*t.sortScore})),t}}],[{key:"normalizeCheckinId",value:function(t){return t.toString()}}]),t})();window.WallState=t})();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}})();!(function(){var t=(function(){function t(e){_classCallCheck(this,t),this.helpers=e,this.history=new Immutable.Map,e.autoBind(this),setInterval(this.cleanup,6e4)}return _createClass(t,[{key:"getCountInLastMinute",value:function(){var t=this.helpers.getUnixTimestamp();return this.history.reduce((function(e,n,i){return i>=t-60?e+n:e}),0)}},{key:"track",value:function(){var t=this.helpers.getUnixTimestamp(),e=this.history.get(t,0);e++,this.history=this.history.set(t,e)}},{key:"cleanup",value:function(){var t=this.helpers.getUnixTimestamp()-120;this.history=this.history.filter((function(e,n){return n>t}))}}]),t})();window.WallCheckinsPerSecondHistory=t})();
"use strict";!(function(e){var n=helpers.translation,t=helpers.map,i=helpers.sharing,a=e("html"),o=e("body"),l={},s={},r=void 0,c=!1,d=!0,p=null,m=null;_.assign(l,{messages:{},defaults:{proxyHosts:null,proxyImageWidth:400,proxyImageHeight:400,proxyProfileImageHeight:100,proxyProfileImageWidth:100,rankingMode:"time",proxyNoCache:!1,proxySalt:"",wallId:0,revealInterval:1500,container:"",animation:!0,webAppPath:null,isAdsEnabled:!1,adsFrequency:null,ads:[],initialCheckins:null,additionalCheckins:null},themeParams:{maxCommentLength:160,enableAspectRatioImages:!0,defaultPostImageAspectRatio:1,minPostImageAspectRatio:.75,maxPostImageAspectRatio:2.76}});var u=function(){return(p=s.getProjection())?Promise.resolve():new Promise(function(e){s.addListener("projection_changed",(function(){p=s.getProjection(),e()}))})},h=function(){var n=e("#map").height();return n>1200?0:0-Math.round(n/4)},g=function(e){var n=Math.pow(2,s.getZoom()),t=h(),i=new google.maps.Point(0/n,t/n),a=p.fromLatLngToPoint(e),o=new google.maps.Point(a.x-i.x,a.y+i.y);s.panTo(p.fromPointToLatLng(o))};l.create=function(p){(p=e.extend({},l.defaults,p)).$container=e(".socialwall_container"),p.initialCheckins||(p.initialCheckins=30);var h=[],f=[],k=void 0,v=void 0,b=void 0,C=void 0;C=p.displayNextCheckinInterval>0?p.displayNextCheckinInterval:1e4;var w=new helpers.Image(p),y=new helpers.Wall(p),I=new helpers.Video(p,helpers.Wall,helpers.Templates),x=function(n){var t=void 0,i=void 0,a=void 0,o=void 0,s=n.html_comment,r=null,c=n.post_image;if(n.tags&&(r=n.tags.replace(/#/g,"")),t=e(templates.container({id:n.id,type:n.type,tags:r,weight:n.weight,externalCreatedTimestamp:n.external_created_timestamp,userId:n.external_user_id,bonus:n.bonus||0,isLooped:n.isLooped,viewType:null,postLink:n.post_link})),(i=t.find(".checkin")).addClass(n.colorClass),n.is_highlighted&&(i.append(templates.highlight_icon()),i.addClass("checkin-highlighted")),t=helpers.Wall.addImageAndMessageClasses(t,"wrapper",c,s),i=helpers.Wall.addImageAndMessageClasses(i,"checkin",c,s),c){var d=100/w.getAspectRatio(n,"post_image",l.themeParams)+"%";a=e(templates.image({image:c,imagePaddingBottom:d,postLink:n.post_link,message:s}))}else a=e(templates.message({message:s}));var p=helpers.checkins.getShortName(n),m=helpers.checkins.getFullName(n),u=helpers.checkins.getCombinedName(n),h=p!==m,g=templates.user_name_parts({shortName:p,fullName:m,combinedName:u,hasSeparateNames:h});return o=e(templates.user({type:n.type,shortName:p,fullName:m,combinedName:u,nameParts:g,userLink:n.external_user_link,image:n.external_image,externalCreatedTimestamp:n.external_created_timestamp,postLink:n.post_link})),i.append(a),i.append(o),helpers.Video.initVideo(n,i),t.html()},L=function(){b&&b.infoBubble&&b.infoBubble.close()},P=function(){h.length>0&&_.each(h,(function(e){e.infoBubble&&e.infoBubble.close()}))},S=function(e){h[e].infoBubble.close(),delete h[e].infoBubble,h[e].marker.setMap(null),google.maps.event.clearInstanceListeners(h[e].marker),delete h[e].marker,h.splice(e,1)},T=function(e){var n=_.findIndex(h,(function(n){return n.id===e}));-1!==n&&S(n)},B=function(){if(0===h.length)return null;h=_.sortBy(h,[function(e){return e.displayCount},function(e){return-1*e.sortScore}]);var e=3*p.initialCheckins;if(h.length>e){for(var n=h.length-e,t=0;t<n;t++)S(h.length-1);h.splice(e)}var i=0;return h[0]===b&&h.length>1&&(i=1),h[i].displayCount++,h[i]},N=function(n){var t=void 0,i=e("<div />"),a=m||Date.now();i.html(n.infoBubble.getContent()),t=helpers.Wall.humanTimeDiff(a-n.external_created_timestamp),i.find(".checkin-timestamp").text(t),n.infoBubble.setContent(i.html())},W=function(n){return e("."+n.colorClass).css("background-color")},M=function(){e(".map-info").text(n.__("NO_POSTS_FOUND")),o.removeClass("loop-started"),l.stopCheckinDisplayLoop(),k=null},A=function(n){helpers.Video.hasRealVideo(n)&&setTimeout((function(){var t=e(".checkin-"+n.id);I.displayVideo(t)}),200)},D=function(){if(d){var e=B();L(),N(e),g(e.marker.position),e.infoBubble.open(s,e.marker),A(e),b=e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0!==h.length?(o.hasClass("loop-started")||o.addClass("loop-started"),v=setTimeout((function(){D(),k=setInterval(D,C)}),e)):M()},z=function(){clearTimeout(v),clearInterval(k)},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;z(),O(e)},j=function(e){return-1!==f.indexOf(e)},V=function(){f=[],h.length>0&&_.each(h,(function(e){f.push(e.id)}))},F=function(e){_.each(e,(function(e){var n=_.findIndex(h,(function(n){return n.id===e}));if(-1!==n){var t=h[n].id;_.get(b,"id")===t?(S(n),R()):S(n)}}))},E=function e(n){if(j(n.id)){if(_.get(b,"id")===n.id)return void setTimeout(e.bind(null,n),C);T(n.id)}n.displayCount=0,n.colorClass=y.getRandomCheckinColorClass(n.id),n=w.prepareImages(n),n=y.prepareEntities(n),helpers.Image.preloadImages(n);var t=p.maxCommentLength||l.themeParams.maxCommentLength;(n=helpers.Checkins.prepareComment(n,t)).marker=new google.maps.Marker({position:new google.maps.LatLng(n.latitude,n.longitude),map:s,icon:{url:"/img/map_marker.png",scaledSize:new google.maps.Size(30,41)}}),n.infoBubble=new InfoBubble({backgroundColor:W(n),content:x(n),disableAutoPan:!0,padding:0,arrowPosition:48,arrowStyle:2,arrowSize:10,borderWidth:0,closeSrc:"/img/close_me.png",shadowStyle:0}),n.marker.addListener("click",(function(){P(),N(n),g(n.marker.position),n.infoBubble.open(s,n.marker),R(C),A(n),b=n})),h.push(n),V()},H=function(e){_.each(e,(function(e){e.latitude&&e.longitude&&E(e)})),k||O()},U=function(){betterFetch.json(p.webAppPath+"/get_cached_checkins.json",{wallId:p.wallId}).then((function(e){e.cachedCheckins&&H(e.cachedCheckins)}))},q=function(){0===_.size(h)&&U()},Q=function(){c=!0,r.disconnect()},Z=function(){(r=y.getWallSocket()).on("wallping",(function(e){m=e.serverTime})),r.on("new checkins",H),r.on("old checkins",H),r.on("removed checkins",F),r.on("update checkin data",(function(e){if(!e.id)return!1;H([e])})),r.on("connect_error",q),r.on("subscribe error",q),r.on("stop",Q)};_.assign(l,{getOption:function(e){return p[e]?p[e]:null},setOption:function(e,n){return void 0!==p[e]&&(p[e]=n,!0)},initMap:function(){var m=t.getMapOptions(google,l.themeParams.MapOptions);s=new google.maps.Map(document.getElementById("map"),m);var h=["click","dblclick","dragstart","dragstop","resize","rightclick","zoom_changed"];return _.each(h,(function(e){s.addListener(e,(function(){R(C),d=!1}))})),s.addListener("idle",(function(){d=!0})),u().then((function(){Z(),helpers.Wall.initClipboard(),y.initUser(),y.generateInstructions(),helpers.Wall.loopInstructions(),n.translateText(),i.initSharingLinks(),I.init(),document.visibilityState&&!c&&y.initDynamicDisconnect(r),p.startInStaticMode&&U();for(var t=void 0,l=1;l<=p.colorCount;l++)(t=e("<div />",{class:"checkin-color-"+l})).css("display","none"),o.append(t);setTimeout(helpers.Wall.reloadWall.bind(null,r),72e5),o.removeClass("wall-loading"),a.removeClass("wall-loading"),a.addClass("wall-initialized")})),!0},startCheckinDisplayLoop:O,stopCheckinDisplayLoop:z})},window.Wall=l})(jQuery);
"use strict";!(function(){var e=$("body"),l=$("html, body"),n=(screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,(function(){screenfull.isFullscreen?(l.addClass("fullscreen"),scrollTo(0,0)):l.removeClass("fullscreen")})),{enter:function(){screenfull.enabled&&screenfull.request()},leave:function(){screenfull.enabled&&screenfull.exit()},isSupported:function(){return screenfull.enabled},isFullscreen:function(){return screenfull.isFullscreen},getFullscreenChangeEventName:function(){return _.get(screenfull,"raw.fullscreenchange")}});screenfull.enabled&&(e.addClass("fullscreen-support"),e.on("click",".fullscreen-enter",n.enter),e.on("click",".fullscreen-leave",n.leave)),window.WallsioFullscreen=n})();
"use strict";$((function(){var o=!1,n=null,e=$("body"),t=function(){o=!0,e.addClass("mousemoving")},u=function(){o=!1,e.removeClass("mousemoving")},s=function(){clearTimeout(n),n=setTimeout(u,2e3)};$(document).on("mousemove scroll",_.throttle((function(){o||t(),s()}),100))}));
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=(function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}})();!(function(){var e=(function(){function e(t,a){_classCallCheck(this,e),this.Wall=t,this.WallHelper=a,helpers.autoBind(this),this.requestOlderCheckinsThrottled=_.throttle((function(e){return t.requestOlderCheckins(e)}),1e3)}return _createClass(e,[{key:"sendDocumentHeight",value:function(){e.sendPostMessage("Wallsio.height",this.WallHelper.getWallHeight())}},{key:"initDomEvents",value:function(){var e=this;$(window).on("message",(function(t){var a=t.originalEvent.data;if(a)switch(a.method){case"Wallsio.requestOlderCheckins":var n=_.get(a.args,0);e.requestOlderCheckinsThrottled(n);break;case"Wallsio.getHeight":e.sendDocumentHeight.apply(e,a.args);break;case"Wallsio.setAutoFillEnabled":var s=_.get(a.args,0);e.Wall.setAutofillEnabled(s)}}))}}],[{key:"sendPostMessage",value:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];window!==parent&&parent.postMessage&&parent.postMessage({method:e,args:a},"*")}}]),e})();window.PostmessageApi=e})();